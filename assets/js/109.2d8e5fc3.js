(window.webpackJsonp=window.webpackJsonp||[]).push([[109],{698:function(t,a,e){t.exports=e.p+"assets/img/2bceeec50f863300732ef853d5aa75cc.90b73c0c.png"},990:function(t,a,e){"use strict";e.r(a);var s=e(3),r=Object(s.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[a("RouterLink",{attrs:{to:"/消息队列/什么是幂等性.html"}},[t._v("什么是幂等性")])],1),t._v(" "),a("h1",{attrs:{id:"为什么会出现重复消费"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么会出现重复消费"}},[t._v("#")]),t._v(" 为什么会出现重复消费？")]),t._v(" "),a("p",[t._v("程序和MQ的交互过程可能会产生重复消费\n以kafka为例\n"),a("img",{attrs:{src:e(698),alt:"2bceeec50f863300732ef853d5aa75cc.png"}}),t._v("\n消费者如果在准备提交offset，但是还没有提交的时候，消费者进程被重启，那么此时已经消费过数据的offset并没有提交，kafka也就不知道你已经消费了，那么消费者再次上线进行消费的时候，会把已经消费的数据，重新在传递过来，这就是消息重复消费的问题。")]),t._v(" "),a("h1",{attrs:{id:"怎么解决"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#怎么解决"}},[t._v("#")]),t._v(" 怎么解决")]),t._v(" "),a("p",[t._v("根据业务出发，比如数据要写库，首先根据主键查一下，如果这个数据已经有了，那就别插入了，执行update即可")])])}),[],!1,null,null,null);a.default=r.exports}}]);