(window.webpackJsonp=window.webpackJsonp||[]).push([[277],{970:function(t,s,a){"use strict";a.r(s);var r=a(3),v=Object(r.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"聚集索引"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#聚集索引"}},[t._v("#")]),t._v(" 聚集索引")]),t._v(" "),s("p",[s("strong",[t._v("聚集索引即索引结构和数据一起存放的索引。主键索引属于聚集索引。")])]),t._v(" "),s("p",[t._v("在 Mysql 中，InnoDB 引擎的表的 "),s("code",[t._v(".ibd")]),t._v("文件就包含了该表的索引和数据，对于 InnoDB 引擎表来说，该表的索引(B+树)的每个非叶子节点存储索引，叶子节点存储索引和索引对应的数据。")]),t._v(" "),s("h2",{attrs:{id:"聚集索引的优点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#聚集索引的优点"}},[t._v("#")]),t._v(" 聚集索引的优点")]),t._v(" "),s("p",[t._v("聚集索引的查询速度非常的快，因为整个 B+树本身就是一颗多叉平衡树，叶子节点也都是有序的，定位到索引的节点，就相当于定位到了数据。")]),t._v(" "),s("h2",{attrs:{id:"聚集索引的缺点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#聚集索引的缺点"}},[t._v("#")]),t._v(" 聚集索引的缺点")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("依赖于有序的数据")]),t._v(" ：因为 B+树是多路平衡树，如果索引的数据不是有序的，那么就需要在插入时排序，如果数据是整型还好，否则类似于字符串或 UUID 这种又长又难比较的数据，插入或查找的速度肯定比较慢。")]),t._v(" "),s("li",[s("strong",[t._v("更新代价大")]),t._v(" ： 如果对索引列的数据被修改时，那么对应的索引也将会被修改， 而且况聚集索引的叶子节点还存放着数据，修改代价肯定是较大的， 所以对于主键索引来说，主键一般都是不可被修改的。")])]),t._v(" "),s("h1",{attrs:{id:"非聚集索引"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#非聚集索引"}},[t._v("#")]),t._v(" 非聚集索引")]),t._v(" "),s("p",[s("strong",[t._v("非聚集索引即索引结构和数据分开存放的索引。")])]),t._v(" "),s("p",[s("strong",[t._v("二级索引属于非聚集索引。")])]),t._v(" "),s("blockquote",[s("p",[t._v("MYISAM 引擎的表的.MYI 文件包含了表的索引， 该表的索引(B+树)的每个叶子非叶子节点存储索引， 叶子节点存储索引和索引对应数据的指针，指向.MYD 文件的数据。")]),t._v(" "),s("p",[s("strong",[t._v("非聚集索引的叶子节点并不一定存放数据的指针， 因为二级索引的叶子节点就存放的是主键，根据主键再回表查数据。")])])]),t._v(" "),s("h2",{attrs:{id:"非聚集索引的优点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#非聚集索引的优点"}},[t._v("#")]),t._v(" 非聚集索引的优点")]),t._v(" "),s("p",[s("strong",[t._v("更新代价比聚集索引要小")]),t._v(" 。非聚集索引的更新代价就没有聚集索引那么大了，非聚集索引的叶子节点是不存放数据的")]),t._v(" "),s("h2",{attrs:{id:"非聚集索引的缺点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#非聚集索引的缺点"}},[t._v("#")]),t._v(" 非聚集索引的缺点")]),t._v(" "),s("ol",[s("li",[t._v("跟聚集索引一样，非聚集索引也依赖于有序的数据")]),t._v(" "),s("li",[s("strong",[t._v("可能会二次查询(回表)")]),t._v(" :这应该是非聚集索引最大的缺点了。 当查到索引对应的指针或主键后，可能还需要根据指针或主键再到数据文件或表中查询。")])])])}),[],!1,null,null,null);s.default=v.exports}}]);