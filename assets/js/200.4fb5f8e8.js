(window.webpackJsonp=window.webpackJsonp||[]).push([[200],{855:function(a,t,v){"use strict";v.r(t);var s=v(3),c=Object(s.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("p",[a._v("动态主机配置协议DHCP （Dynamic Host ConfigurationProtocol）是一种"),t("strong",[a._v("动态的")]),a._v("，向网络终端"),t("strong",[a._v("提供配置参数")]),a._v("的协议。")]),a._v(" "),t("p",[a._v("DHCP提供了"),t("strong",[a._v("即插即用连网")]),a._v("（plug-and-play networking）的机制。允许一台计算机加入新的网络和获取IP地址时，不需手动配置。终端提出申请之后， DHCP可以向终端提供"),t("strong",[a._v("IP地址、网关、 DNS服务器地址")]),a._v("等参数，并进行设置。")]),a._v(" "),t("p",[a._v("DHCP采用"),t("strong",[a._v("客户/服务器")]),a._v("模式")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20va2VoYW9vL3BpY2dvX3JlcG9zaXRvcnkvcmF3L21hc3Rlci9pbWcvaW1hZ2UtMjAyMDA0MjgxNzMyMzUyNTIucG5n?x-oss-process=image/format,png",alt:"image-20200428173235252"}})]),a._v(" "),t("p",[a._v("DHCP 服务器先在其数据库中"),t("strong",[a._v("查找该计算机的配置信息")]),a._v("。若找到，则返回找到的信息；若找不到，则要用到IP地址池。\nDHCP服务器拥有一个IP地址池，当任何启用DHCP的客户端登录到网络时，可从它那里租借一个IP地址，不使用的IP地址就自动返回地址池，供再分配。\n由于DHCP使用传输层协议"),t("strong",[a._v("UDP")]),a._v("，所以DHCP的各类报文均被封装在UDP数据报中。")]),a._v(" "),t("h1",{attrs:{id:"分配地址方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分配地址方式"}},[a._v("#")]),a._v(" 分配地址方式")]),a._v(" "),t("h2",{attrs:{id:"手工分派"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#手工分派"}},[a._v("#")]),a._v(" 手工分派")]),a._v(" "),t("p",[a._v("由网络管理员为少数主机指定固定IP地址。")]),a._v(" "),t("h2",{attrs:{id:"自动分配"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#自动分配"}},[a._v("#")]),a._v(" 自动分配")]),a._v(" "),t("p",[a._v("DHCP为首次接入网络的某些主机分配固定IP地址，且该地址由此主机长期使用。")]),a._v(" "),t("h2",{attrs:{id:"动态分配"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#动态分配"}},[a._v("#")]),a._v(" 动态分配")]),a._v(" "),t("p",[a._v("以“租借”的方式为客户端分配地址，每个地址有一定的租约期限，到期须重新申请或续约")]),a._v(" "),t("h1",{attrs:{id:"dhcp报文种类"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dhcp报文种类"}},[a._v("#")]),a._v(" DHCP报文种类")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20va2VoYW9vL3BpY2dvX3JlcG9zaXRvcnkvcmF3L21hc3Rlci9pbWcvaW1hZ2UtMjAyMDA0MjgxNzQyMDQxNDQucG5n?x-oss-process=image/format,png",alt:"image-20200428174204144"}})]),a._v(" "),t("h1",{attrs:{id:"dhcp中继代理-relay-agent"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dhcp中继代理-relay-agent"}},[a._v("#")]),a._v(" DHCP中继代理（Relay Agent）")]),a._v(" "),t("p",[a._v("DHCP中继代理，就是在DHCP服务器和客户端之间转发DHCP数据包。")]),a._v(" "),t("p",[a._v("现在是每个网络至少有一个 DHCP 中继代理，它配置了DHCP 服务器的 IP 地址信息。DHCP 中继代理以单播方式向 DHCP 服务器转发DHCP发现报文，并等待其回答。收到 DHCP 服务器回答的提供报文后， DHCP 中继代理再将此提供报文发回给主机")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20va2VoYW9vL3BpY2dvX3JlcG9zaXRvcnkvcmF3L21hc3Rlci9pbWcvaW1hZ2UtMjAyMDA0MjgxNzQzNTUzNjQucG5n?x-oss-process=image/format,png",alt:"image-20200428174355364"}})]),a._v(" "),t("h1",{attrs:{id:"工作流程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#工作流程"}},[a._v("#")]),a._v(" 工作流程")]),a._v(" "),t("h2",{attrs:{id:"发现阶段"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#发现阶段"}},[a._v("#")]),a._v(" 发现阶段")]),a._v(" "),t("p",[a._v("DHCP客户机寻找DHCP服务器的阶段")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20va2VoYW9vL3BpY2dvX3JlcG9zaXRvcnkvcmF3L21hc3Rlci9pbWcvaW1hZ2UtMjAyMDA0MjgxNzQ1MjEwOTcucG5n?x-oss-process=image/format,png",alt:"image-20200428174521097"}})]),a._v(" "),t("ol",[t("li",[a._v("当DHCP客户端第一次登录网络时， 若本机没有IP地址设定，就以"),t("strong",[a._v("广播方式")]),a._v("发送DHCP DISCOVER报文来寻找DHCP服务器")]),a._v(" "),t("li",[a._v("网络上每一台安装了TCP/IP协议的主机都会接收这个广播信息，但只有DHCP服务器才会做出响应")])]),a._v(" "),t("h2",{attrs:{id:"提供阶段"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#提供阶段"}},[a._v("#")]),a._v(" 提供阶段")]),a._v(" "),t("p",[a._v("DHCP服务器提供IP地址的阶段")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20va2VoYW9vL3BpY2dvX3JlcG9zaXRvcnkvcmF3L21hc3Rlci9pbWcvaW1hZ2UtMjAyMDA0MjgxNzQ2MTE3NTQucG5n?x-oss-process=image/format,png",alt:"image-20200428174611754"}})]),a._v(" "),t("p",[a._v("接收到DHCP DISCOVER报文后， DHCP服务器会向DHCP客户机发送一个包含出租的IP地址和其他设置的DHCP OFFER报文。")]),a._v(" "),t("h2",{attrs:{id:"选择阶段"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#选择阶段"}},[a._v("#")]),a._v(" 选择阶段")]),a._v(" "),t("p",[a._v("DHCP客户机选择IP地址的阶段")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20va2VoYW9vL3BpY2dvX3JlcG9zaXRvcnkvcmF3L21hc3Rlci9pbWcvaW1hZ2UtMjAyMDA0MjgxNzQ3NDM2MjQucG5n?x-oss-process=image/format,png",alt:"image-20200428174743624"}})]),a._v(" "),t("p",[a._v("如果有多台DHCP服务器向DHCP客户机发来DHCP OFFER报文，则DHCP客户机"),t("strong",[a._v("只接受第一个")]),a._v("收到的DHCP OFFER报文;DHCP客户机以"),t("strong",[a._v("广播的方式")]),a._v("回答DHCP REQUEST请求报文。之所以要以广播方式回答，就是为了通知所有的DHCP服务器，它将选择某台DHCP服务器所提供的IP地址。")]),a._v(" "),t("h2",{attrs:{id:"确认阶段"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#确认阶段"}},[a._v("#")]),a._v(" 确认阶段")]),a._v(" "),t("p",[a._v("DHCP服务器确认所提供的IP地址的阶段")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20va2VoYW9vL3BpY2dvX3JlcG9zaXRvcnkvcmF3L21hc3Rlci9pbWcvaW1hZ2UtMjAyMDA0MjgxNzQ4MTM3OTEucG5n?x-oss-process=image/format,png",alt:"image-20200428174813791"}})]),a._v(" "),t("p",[a._v("收到客户端的REQUEST报文后， DHCP服务器便返回一个DHCPACK报文，告诉DHCP客户端可以使用它提供的IP地址。除了DHCP客户端选中的服务器外，其他的DHCP服务器将收回曾经提供的IP地址")]),a._v(" "),t("h2",{attrs:{id:"重新登录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#重新登录"}},[a._v("#")]),a._v(" 重新登录")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20va2VoYW9vL3BpY2dvX3JlcG9zaXRvcnkvcmF3L21hc3Rlci9pbWcvaW1hZ2UtMjAyMDA0MjgxNzQ5MDg4MTUucG5n?x-oss-process=image/format,png",alt:"image-20200428174908815"}})]),a._v(" "),t("p",[a._v("DHCP客户端每次重新登录网络时，就不再发送DISCOVER报文，而是直接发送包含"),t("strong",[a._v("前一次所分配的IP地址的REQUEST报文")]),a._v("。当DHCP服务器收到这一信息后，它会尝试让DHCP客户端继续使用原来的IP地址，并回答一个DHCPACK信息。")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20va2VoYW9vL3BpY2dvX3JlcG9zaXRvcnkvcmF3L21hc3Rlci9pbWcvaW1hZ2UtMjAyMDA0MjgxNzUwMTczMzcucG5n?x-oss-process=image/format,png",alt:"image-20200428175017337"}})]),a._v(" "),t("p",[a._v("如果此IP地址已"),t("strong",[a._v("无法再分配")]),a._v("给原来的DHCP客户端时（例如，此IP地址已经分配给其他DHCP客户端使用），则DHCP服务器给客户机回答一个DHCP NACK否认信息。当原来的DHCP客户端收到此DHCP NACK信息后，它就必须"),t("strong",[a._v("重新发送")]),a._v("DHCP DISCOVER信息来请求新的IP地址。")]),a._v(" "),t("h2",{attrs:{id:"更新租约"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#更新租约"}},[a._v("#")]),a._v(" 更新租约")]),a._v(" "),t("p",[a._v("IP地址的租约期满后， DHCP服务器便会收回出租的IP地址。如果DHCP客户端要延长其IP租约，则必须更新其IP租约。当客户端**重新启动或租约到50%"),t("strong",[a._v("时， DHCP客户端就需要直接向提供租约的服务器发送DHCP REQUEST包， 更新客户端租约。如客户端与服务器无法联系，则客户端等到租约")]),a._v("到达87.5%**时，进入重新申请状态。")])])}),[],!1,null,null,null);t.default=c.exports}}]);