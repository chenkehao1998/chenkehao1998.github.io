(window.webpackJsonp=window.webpackJsonp||[]).push([[129],{743:function(t,s,a){"use strict";a.r(s);var n=a(3),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("blockquote",[s("p",[t._v("Apache Shiro 628权限绕过漏洞 （CVE-2020-2957） 漏洞详情")]),t._v(" "),s("p",[t._v("CVE-2020-195身份认证绕过漏洞，可以用/hello/1/来绕过登录验证，此次漏洞在之前CVE-2020-1957补丁的基础上进行绕过，访问/hello/1/会进入登录认证，但是通过构造payload:\n/fdsf;/../hello/1 可以绕过登录认证。")]),t._v(" "),s("p",[t._v("影响版本")]),t._v(" "),s("p",[t._v("Shiro <=1.5.1")]),t._v(" "),s("p",[t._v("漏洞分析")]),t._v(" "),s("p",[t._v("https://www.rednn.com/safe/202003/30176.html")])]),t._v(" "),s("blockquote",[s("p",[t._v("原理：https://blog.csdn.net/m0_49443776/article/details/114173259")])]),t._v(" "),s("p",[t._v("有的教程让我访问"),s("code",[t._v("/xxx;/../admin/123")]),t._v("来跳过 有的教程让我访问"),s("code",[t._v("/xxx/..;/admin/123")]),t._v("\n通过上面的介绍 访问 怎么都会返回重定向到登录页面，而且debug的时候获得的路径并不是我原始输入的，百思不得其解")]),t._v(" "),s("p",[t._v("后来发现不是单纯shiro版本的问题 我编写代码的时候使用了springboot，而springboot的版本也会有影响\n而"),s("code",[t._v("shiro-spring-boot-web-starter")]),t._v("最终追述过去 对应的版本其实也是shiro 1.5.1")]),t._v(" "),s("div",{staticClass:"language-xml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[t._v("        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.apache.shiro"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("shiro-spring-boot-web-starter"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1.5.1"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("这个漏洞源自于 shiro和springboot对url解析规则不一致\n而新版的springboot的解析是不会出现这个问题的 漏洞无法利用 切换到以前的版本的springboot 漏洞成功复现")]),t._v(" "),s("p",[t._v("不过只有"),s("code",[t._v("/xxx/..;/admin/123")]),t._v("能够被绕过，另一个实际上无法绕过")])])}),[],!1,null,null,null);s.default=e.exports}}]);