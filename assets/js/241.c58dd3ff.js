(window.webpackJsonp=window.webpackJsonp||[]).push([[241],{911:function(s,n,a){"use strict";a.r(n);var e=a(3),r=Object(e.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p",[s._v("Nginx为我们默认提供了三种负载均衡的策略：\n1.轮询：\n将客户端发起的请求，平均分配给每一台服务器\n2.权重：\n会将客户端的请求，根据服务器的权重值不同，分配不同的数量\n3.ip_hash:\n基于发起请求的客户端的ip地址不同，他始终会将请求发送到指定的服务器上\n就是说如果这个客户端的请求的ip地址不变，那么处理请求的服务器将一直是同一个")]),s._v(" "),n("h1",{attrs:{id:"轮询"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#轮询"}},[s._v("#")]),s._v(" 轮询")]),s._v(" "),n("p",[s._v("想实现Nginx轮询负载均衡机制只需要修改配置文件如下")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 声明一个upstream\nupstream my_server{\n    server ip1:port1;\n    server ip2:port2;\n}\nserver {\n    listen       80;\n    server_name  localhost;\n\n\tlocation / {\n        proxy_pass http://my_server/;\t# 上面声明的地址\n    }\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("h1",{attrs:{id:"权重"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#权重"}},[s._v("#")]),s._v(" 权重")]),s._v(" "),n("p",[s._v("实现权重的方式：在配置文件中upstream块中加上weight")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("upstream my_server{\n# 增加权重\n    server ip1:port1 weight=10;\n    server ip2:port2 weight=2;\n}\nserver {\n    listen       80;\n    server_name  localhost;\n\n\tlocation / {\n        proxy_pass http://my_server/;\n    }\n}\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("h1",{attrs:{id:"ip-hash"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ip-hash"}},[s._v("#")]),s._v(" ip_hash")]),s._v(" "),n("p",[s._v("实现"),n("code",[s._v("ip_hash")]),s._v("方式：在配置文件upstream块中加上"),n("code",[s._v("ip_hash")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("upstream my_server{\n# 增加ip_hash配置\n  ip_hash;\n  server ip1:port1 weight=10;\n  server ip2:port2 weight=2;\n}\nserver {\n    listen       80;\n    server_name  localhost;\n\n\tlocation / {\n        proxy_pass http://my_server/;\t\n    }\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])])])}),[],!1,null,null,null);n.default=r.exports}}]);