<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JVM内存结构 | 慕溪</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/logo.png">
    <meta name="description" content="人生如逆旅,我亦是行人">
    <meta name="keywords" content="个人技术博客,技术文档,学习,github,markdown">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.5fbcefad.css" as="style"><link rel="preload" href="/assets/js/app.0e772854.js" as="script"><link rel="preload" href="/assets/js/2.815a8da9.js" as="script"><link rel="preload" href="/assets/js/5.2a38d04c.js" as="script"><link rel="prefetch" href="/assets/js/10.7217cebc.js"><link rel="prefetch" href="/assets/js/100.f465b6ce.js"><link rel="prefetch" href="/assets/js/101.3d0047d3.js"><link rel="prefetch" href="/assets/js/102.b25fb4da.js"><link rel="prefetch" href="/assets/js/103.605365d5.js"><link rel="prefetch" href="/assets/js/104.08e1c9fc.js"><link rel="prefetch" href="/assets/js/105.0fbd98f5.js"><link rel="prefetch" href="/assets/js/106.7787a522.js"><link rel="prefetch" href="/assets/js/107.400ba225.js"><link rel="prefetch" href="/assets/js/108.664a46cf.js"><link rel="prefetch" href="/assets/js/109.2d8e5fc3.js"><link rel="prefetch" href="/assets/js/11.41f364c4.js"><link rel="prefetch" href="/assets/js/110.2ec3395d.js"><link rel="prefetch" href="/assets/js/111.a3869fd3.js"><link rel="prefetch" href="/assets/js/112.ca6db7ef.js"><link rel="prefetch" href="/assets/js/113.1d120fdd.js"><link rel="prefetch" href="/assets/js/114.eee5040f.js"><link rel="prefetch" href="/assets/js/115.e32e3db0.js"><link rel="prefetch" href="/assets/js/116.33c74a39.js"><link rel="prefetch" href="/assets/js/117.d136eee0.js"><link rel="prefetch" href="/assets/js/118.7d855e53.js"><link rel="prefetch" href="/assets/js/119.65e8aa95.js"><link rel="prefetch" href="/assets/js/12.ac03eb60.js"><link rel="prefetch" href="/assets/js/120.b444e87b.js"><link rel="prefetch" href="/assets/js/121.8f54537e.js"><link rel="prefetch" href="/assets/js/122.cef07326.js"><link rel="prefetch" href="/assets/js/123.4edacaaf.js"><link rel="prefetch" href="/assets/js/124.53ab103f.js"><link rel="prefetch" href="/assets/js/125.7e429d0d.js"><link rel="prefetch" href="/assets/js/126.87965194.js"><link rel="prefetch" href="/assets/js/127.dc31682e.js"><link rel="prefetch" href="/assets/js/128.bd4d8e96.js"><link rel="prefetch" href="/assets/js/129.bb265671.js"><link rel="prefetch" href="/assets/js/13.7ab0c05c.js"><link rel="prefetch" href="/assets/js/130.358e8efc.js"><link rel="prefetch" href="/assets/js/131.6515a7a3.js"><link rel="prefetch" href="/assets/js/132.10154a4f.js"><link rel="prefetch" href="/assets/js/133.4e5b6b18.js"><link rel="prefetch" href="/assets/js/134.b9171f25.js"><link rel="prefetch" href="/assets/js/135.1115ccd9.js"><link rel="prefetch" href="/assets/js/136.216ac8f3.js"><link rel="prefetch" href="/assets/js/137.6d107c9d.js"><link rel="prefetch" href="/assets/js/138.0af3af76.js"><link rel="prefetch" href="/assets/js/139.9d842c6f.js"><link rel="prefetch" href="/assets/js/14.2192b417.js"><link rel="prefetch" href="/assets/js/140.2a265c23.js"><link rel="prefetch" href="/assets/js/141.da379f43.js"><link rel="prefetch" href="/assets/js/142.3421737a.js"><link rel="prefetch" href="/assets/js/143.f784981f.js"><link rel="prefetch" href="/assets/js/144.36658efa.js"><link rel="prefetch" href="/assets/js/145.e472e6e0.js"><link rel="prefetch" href="/assets/js/146.7d83c1d5.js"><link rel="prefetch" href="/assets/js/147.1f646b03.js"><link rel="prefetch" href="/assets/js/148.1c0adc55.js"><link rel="prefetch" href="/assets/js/149.492d0752.js"><link rel="prefetch" href="/assets/js/15.e5c7c934.js"><link rel="prefetch" href="/assets/js/150.c2253d40.js"><link rel="prefetch" href="/assets/js/151.9561a6e8.js"><link rel="prefetch" href="/assets/js/152.8341c0bb.js"><link rel="prefetch" href="/assets/js/153.f899fdbf.js"><link rel="prefetch" href="/assets/js/154.2b37632e.js"><link rel="prefetch" href="/assets/js/155.69d997eb.js"><link rel="prefetch" href="/assets/js/156.81baaa4b.js"><link rel="prefetch" href="/assets/js/157.3a3fd816.js"><link rel="prefetch" href="/assets/js/158.b8ab29f9.js"><link rel="prefetch" href="/assets/js/159.6a358f88.js"><link rel="prefetch" href="/assets/js/16.8afa1bc5.js"><link rel="prefetch" href="/assets/js/160.d8fbdc3c.js"><link rel="prefetch" href="/assets/js/161.79847111.js"><link rel="prefetch" href="/assets/js/162.c3f581bb.js"><link rel="prefetch" href="/assets/js/163.56e1cccd.js"><link rel="prefetch" href="/assets/js/164.78a29f6d.js"><link rel="prefetch" href="/assets/js/165.eb23acc5.js"><link rel="prefetch" href="/assets/js/166.adf97ef1.js"><link rel="prefetch" href="/assets/js/167.95fa8d8a.js"><link rel="prefetch" href="/assets/js/168.3554bb15.js"><link rel="prefetch" href="/assets/js/169.32abadf0.js"><link rel="prefetch" href="/assets/js/17.38d71f1a.js"><link rel="prefetch" href="/assets/js/170.ced25c98.js"><link rel="prefetch" href="/assets/js/171.102ca945.js"><link rel="prefetch" href="/assets/js/172.f46d8b67.js"><link rel="prefetch" href="/assets/js/173.0d455e76.js"><link rel="prefetch" href="/assets/js/174.e8b963e1.js"><link rel="prefetch" href="/assets/js/175.dcab425b.js"><link rel="prefetch" href="/assets/js/176.90dcc97c.js"><link rel="prefetch" href="/assets/js/177.4e6346b3.js"><link rel="prefetch" href="/assets/js/178.0b5efb37.js"><link rel="prefetch" href="/assets/js/179.bbb89279.js"><link rel="prefetch" href="/assets/js/18.bc8f2eca.js"><link rel="prefetch" href="/assets/js/180.0fe9a36b.js"><link rel="prefetch" href="/assets/js/181.86185a29.js"><link rel="prefetch" href="/assets/js/182.a32bab59.js"><link rel="prefetch" href="/assets/js/183.3d216cb4.js"><link rel="prefetch" href="/assets/js/184.64512d4c.js"><link rel="prefetch" href="/assets/js/185.80e25a88.js"><link rel="prefetch" href="/assets/js/186.daaf4084.js"><link rel="prefetch" href="/assets/js/187.ee6139c4.js"><link rel="prefetch" href="/assets/js/188.32b8d293.js"><link rel="prefetch" href="/assets/js/189.97aa98b6.js"><link rel="prefetch" href="/assets/js/19.0f171dbb.js"><link rel="prefetch" href="/assets/js/190.90acc8d7.js"><link rel="prefetch" href="/assets/js/191.39d18616.js"><link rel="prefetch" href="/assets/js/192.c129116f.js"><link rel="prefetch" href="/assets/js/193.a56c3126.js"><link rel="prefetch" href="/assets/js/194.1cdad24d.js"><link rel="prefetch" href="/assets/js/195.56d9a758.js"><link rel="prefetch" href="/assets/js/196.70a34c9b.js"><link rel="prefetch" href="/assets/js/197.215c0611.js"><link rel="prefetch" href="/assets/js/198.1f0af3f3.js"><link rel="prefetch" href="/assets/js/199.dd0abac1.js"><link rel="prefetch" href="/assets/js/20.293de6da.js"><link rel="prefetch" href="/assets/js/200.4fb5f8e8.js"><link rel="prefetch" href="/assets/js/201.3d015d0f.js"><link rel="prefetch" href="/assets/js/202.101d03b3.js"><link rel="prefetch" href="/assets/js/203.aaf4ca11.js"><link rel="prefetch" href="/assets/js/204.dbef1ba1.js"><link rel="prefetch" href="/assets/js/205.d44176be.js"><link rel="prefetch" href="/assets/js/206.21cba64c.js"><link rel="prefetch" href="/assets/js/207.27e56d08.js"><link rel="prefetch" href="/assets/js/208.f21f731a.js"><link rel="prefetch" href="/assets/js/209.e67163af.js"><link rel="prefetch" href="/assets/js/21.32b23d4a.js"><link rel="prefetch" href="/assets/js/210.a5dcad92.js"><link rel="prefetch" href="/assets/js/211.21b22c3c.js"><link rel="prefetch" href="/assets/js/212.0ab0d619.js"><link rel="prefetch" href="/assets/js/213.b0289fd9.js"><link rel="prefetch" href="/assets/js/214.00c2f850.js"><link rel="prefetch" href="/assets/js/215.338f8cac.js"><link rel="prefetch" href="/assets/js/216.76e90907.js"><link rel="prefetch" href="/assets/js/217.7e2b7db5.js"><link rel="prefetch" href="/assets/js/218.20c105da.js"><link rel="prefetch" href="/assets/js/219.6293ebf4.js"><link rel="prefetch" href="/assets/js/22.dae0a967.js"><link rel="prefetch" href="/assets/js/220.2af4ec7b.js"><link rel="prefetch" href="/assets/js/221.6d22fae6.js"><link rel="prefetch" href="/assets/js/222.755eb1ae.js"><link rel="prefetch" href="/assets/js/223.8567b4a2.js"><link rel="prefetch" href="/assets/js/224.824fe88f.js"><link rel="prefetch" href="/assets/js/225.cc07767e.js"><link rel="prefetch" href="/assets/js/226.328ad2e7.js"><link rel="prefetch" href="/assets/js/227.e3e9d0ca.js"><link rel="prefetch" href="/assets/js/228.e6aef909.js"><link rel="prefetch" href="/assets/js/229.1f4cd1ff.js"><link rel="prefetch" href="/assets/js/23.0c46e5dc.js"><link rel="prefetch" href="/assets/js/230.55f9a2d8.js"><link rel="prefetch" href="/assets/js/231.8bf10c2e.js"><link rel="prefetch" href="/assets/js/232.3da755d0.js"><link rel="prefetch" href="/assets/js/233.b757d74f.js"><link rel="prefetch" href="/assets/js/234.7738aacd.js"><link rel="prefetch" href="/assets/js/235.11122c37.js"><link rel="prefetch" href="/assets/js/236.661d7c8c.js"><link rel="prefetch" href="/assets/js/237.6d1ea8bd.js"><link rel="prefetch" href="/assets/js/238.3b0b8a0b.js"><link rel="prefetch" href="/assets/js/239.ef8f5256.js"><link rel="prefetch" href="/assets/js/24.9bb66b7b.js"><link rel="prefetch" href="/assets/js/240.1c56a3c5.js"><link rel="prefetch" href="/assets/js/241.c58dd3ff.js"><link rel="prefetch" href="/assets/js/242.b80b87f3.js"><link rel="prefetch" href="/assets/js/243.b1c4b6e3.js"><link rel="prefetch" href="/assets/js/244.988e6afe.js"><link rel="prefetch" href="/assets/js/245.13b21889.js"><link rel="prefetch" href="/assets/js/246.5d00f991.js"><link rel="prefetch" href="/assets/js/247.7a4b97bd.js"><link rel="prefetch" href="/assets/js/248.97ebbbd8.js"><link rel="prefetch" href="/assets/js/249.38a0ff81.js"><link rel="prefetch" href="/assets/js/25.91e86f3d.js"><link rel="prefetch" href="/assets/js/250.0419f8ad.js"><link rel="prefetch" href="/assets/js/251.62a85e12.js"><link rel="prefetch" href="/assets/js/252.6ad6d3ec.js"><link rel="prefetch" href="/assets/js/253.d5284821.js"><link rel="prefetch" href="/assets/js/254.2c86caab.js"><link rel="prefetch" href="/assets/js/255.8dbfccd2.js"><link rel="prefetch" href="/assets/js/256.f320dcb0.js"><link rel="prefetch" href="/assets/js/257.83d77734.js"><link rel="prefetch" href="/assets/js/258.111eea0b.js"><link rel="prefetch" href="/assets/js/259.b80a015f.js"><link rel="prefetch" href="/assets/js/26.6d614d3c.js"><link rel="prefetch" href="/assets/js/260.6f8c3775.js"><link rel="prefetch" href="/assets/js/261.856b6618.js"><link rel="prefetch" href="/assets/js/262.2ba5f8d2.js"><link rel="prefetch" href="/assets/js/263.1b387384.js"><link rel="prefetch" href="/assets/js/264.ee8f081e.js"><link rel="prefetch" href="/assets/js/265.d32318ec.js"><link rel="prefetch" href="/assets/js/266.f20170a6.js"><link rel="prefetch" href="/assets/js/267.92f744f1.js"><link rel="prefetch" href="/assets/js/268.3ad740c3.js"><link rel="prefetch" href="/assets/js/269.aa9118ae.js"><link rel="prefetch" href="/assets/js/27.850b9875.js"><link rel="prefetch" href="/assets/js/270.82a4b32e.js"><link rel="prefetch" href="/assets/js/271.5f1d2587.js"><link rel="prefetch" href="/assets/js/272.98a6502b.js"><link rel="prefetch" href="/assets/js/273.8b6671f3.js"><link rel="prefetch" href="/assets/js/274.44ba4b73.js"><link rel="prefetch" href="/assets/js/275.341916a9.js"><link rel="prefetch" href="/assets/js/276.58005bc7.js"><link rel="prefetch" href="/assets/js/277.4001d8d1.js"><link rel="prefetch" href="/assets/js/278.230c8748.js"><link rel="prefetch" href="/assets/js/279.56180dc4.js"><link rel="prefetch" href="/assets/js/28.0763e9d2.js"><link rel="prefetch" href="/assets/js/280.00778ba7.js"><link rel="prefetch" href="/assets/js/281.4344f65d.js"><link rel="prefetch" href="/assets/js/282.6a1f3fce.js"><link rel="prefetch" href="/assets/js/283.6117ae14.js"><link rel="prefetch" href="/assets/js/284.12d4390c.js"><link rel="prefetch" href="/assets/js/285.fe4e4e0d.js"><link rel="prefetch" href="/assets/js/286.bcb42ef7.js"><link rel="prefetch" href="/assets/js/287.7c1e9aa8.js"><link rel="prefetch" href="/assets/js/288.5940ecfc.js"><link rel="prefetch" href="/assets/js/289.e37bbf07.js"><link rel="prefetch" href="/assets/js/29.0a527a92.js"><link rel="prefetch" href="/assets/js/290.b1ca80ed.js"><link rel="prefetch" href="/assets/js/291.471f3d75.js"><link rel="prefetch" href="/assets/js/292.a0d04a11.js"><link rel="prefetch" href="/assets/js/293.6b760d8d.js"><link rel="prefetch" href="/assets/js/294.7eaf840c.js"><link rel="prefetch" href="/assets/js/295.5a9a0d93.js"><link rel="prefetch" href="/assets/js/296.1135de9b.js"><link rel="prefetch" href="/assets/js/297.01d54be3.js"><link rel="prefetch" href="/assets/js/298.d651cd19.js"><link rel="prefetch" href="/assets/js/299.25d7cc4f.js"><link rel="prefetch" href="/assets/js/3.f37c73ac.js"><link rel="prefetch" href="/assets/js/30.e1138267.js"><link rel="prefetch" href="/assets/js/300.12a76407.js"><link rel="prefetch" href="/assets/js/31.50037c72.js"><link rel="prefetch" href="/assets/js/32.236081ce.js"><link rel="prefetch" href="/assets/js/33.3f32159e.js"><link rel="prefetch" href="/assets/js/34.97f592a8.js"><link rel="prefetch" href="/assets/js/35.a8406fcd.js"><link rel="prefetch" href="/assets/js/36.a44e7988.js"><link rel="prefetch" href="/assets/js/37.1cca135a.js"><link rel="prefetch" href="/assets/js/38.6dc89515.js"><link rel="prefetch" href="/assets/js/39.0bd6453e.js"><link rel="prefetch" href="/assets/js/4.0f9fb021.js"><link rel="prefetch" href="/assets/js/40.ba90d3fd.js"><link rel="prefetch" href="/assets/js/41.16cfe9c0.js"><link rel="prefetch" href="/assets/js/42.40c5820c.js"><link rel="prefetch" href="/assets/js/43.3d3d0cb7.js"><link rel="prefetch" href="/assets/js/44.67e75ea1.js"><link rel="prefetch" href="/assets/js/45.59dc2f6e.js"><link rel="prefetch" href="/assets/js/46.180e91f6.js"><link rel="prefetch" href="/assets/js/47.d7fd49ce.js"><link rel="prefetch" href="/assets/js/48.a05f633d.js"><link rel="prefetch" href="/assets/js/49.4c9503c1.js"><link rel="prefetch" href="/assets/js/50.c9205bb7.js"><link rel="prefetch" href="/assets/js/51.700b43d4.js"><link rel="prefetch" href="/assets/js/52.0d8bf680.js"><link rel="prefetch" href="/assets/js/53.b9f7d80b.js"><link rel="prefetch" href="/assets/js/54.cdc61998.js"><link rel="prefetch" href="/assets/js/55.0d9fd5ef.js"><link rel="prefetch" href="/assets/js/56.38da2ad8.js"><link rel="prefetch" href="/assets/js/57.0eb5606a.js"><link rel="prefetch" href="/assets/js/58.025efe9c.js"><link rel="prefetch" href="/assets/js/59.af8c032e.js"><link rel="prefetch" href="/assets/js/6.10566720.js"><link rel="prefetch" href="/assets/js/60.67ae6d45.js"><link rel="prefetch" href="/assets/js/61.946c7660.js"><link rel="prefetch" href="/assets/js/62.0f066b68.js"><link rel="prefetch" href="/assets/js/63.a55dba31.js"><link rel="prefetch" href="/assets/js/64.9c4e91ce.js"><link rel="prefetch" href="/assets/js/65.96fd3e8f.js"><link rel="prefetch" href="/assets/js/66.90f62efe.js"><link rel="prefetch" href="/assets/js/67.0c40357a.js"><link rel="prefetch" href="/assets/js/68.96e74d62.js"><link rel="prefetch" href="/assets/js/69.55aa4617.js"><link rel="prefetch" href="/assets/js/7.ab77b716.js"><link rel="prefetch" href="/assets/js/70.b0e9c70c.js"><link rel="prefetch" href="/assets/js/71.b930ea6f.js"><link rel="prefetch" href="/assets/js/72.691daf1b.js"><link rel="prefetch" href="/assets/js/73.600af571.js"><link rel="prefetch" href="/assets/js/74.1f381f66.js"><link rel="prefetch" href="/assets/js/75.5399232e.js"><link rel="prefetch" href="/assets/js/76.08e41d61.js"><link rel="prefetch" href="/assets/js/77.518260ba.js"><link rel="prefetch" href="/assets/js/78.e3df4c85.js"><link rel="prefetch" href="/assets/js/79.d82b849f.js"><link rel="prefetch" href="/assets/js/8.4acdc9ea.js"><link rel="prefetch" href="/assets/js/80.16381767.js"><link rel="prefetch" href="/assets/js/81.d174fc89.js"><link rel="prefetch" href="/assets/js/82.0e1417d0.js"><link rel="prefetch" href="/assets/js/83.86f2f79a.js"><link rel="prefetch" href="/assets/js/84.95f11e5f.js"><link rel="prefetch" href="/assets/js/85.f9e99eb4.js"><link rel="prefetch" href="/assets/js/86.f4b32203.js"><link rel="prefetch" href="/assets/js/87.b72378d9.js"><link rel="prefetch" href="/assets/js/88.acd5f2e3.js"><link rel="prefetch" href="/assets/js/89.0bc14d02.js"><link rel="prefetch" href="/assets/js/9.642fc91a.js"><link rel="prefetch" href="/assets/js/90.e5afed6c.js"><link rel="prefetch" href="/assets/js/91.53103020.js"><link rel="prefetch" href="/assets/js/92.7e3cef91.js"><link rel="prefetch" href="/assets/js/93.fb96b97a.js"><link rel="prefetch" href="/assets/js/94.fbe25de0.js"><link rel="prefetch" href="/assets/js/95.24608938.js"><link rel="prefetch" href="/assets/js/96.4f5c7784.js"><link rel="prefetch" href="/assets/js/97.dfab4c0b.js"><link rel="prefetch" href="/assets/js/98.e5093d34.js"><link rel="prefetch" href="/assets/js/99.374ec516.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5fbcefad.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="慕溪" class="logo"> <span class="site-name can-hide">慕溪</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程学习" class="dropdown-title"><a href="/" class="link-title router-link-active">编程学习</a> <span class="title" style="display:none;">编程学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>教程网站</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.runoob.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  菜鸟教程
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://javaguide.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java Guide
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://pdai.tech/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java全栈知识体系
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://learngitbranching.js.org/?locale=zh_CN" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GIT在线学习
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="http://c.biancheng.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  C语言中文网
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.liaoxuefeng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  廖雪峰
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.ruanyifeng.com/blog/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阮一峰的网络日志
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://tech.meituan.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  美团技术团队
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>工具类网站</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://d.serctl.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github release加速下载
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.bejson.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  BE JSON
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://tool.lu/markdown/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Markdown在线编辑器
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记" class="dropdown-title"><a href="/" class="link-title router-link-active">笔记</a> <span class="title" style="display:none;">笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ds/" class="nav-link">数据结构与算法</a></li><li class="dropdown-item"><!----> <a href="/python/" class="nav-link">python</a></li><li class="dropdown-item"><!----> <a href="/safe/" class="nav-link">安全</a></li><li class="dropdown-item"><!----> <a href="/java/" class="nav-link">java</a></li><li class="dropdown-item"><!----> <a href="/system/" class="nav-link">操作系统</a></li><li class="dropdown-item"><!----> <a href="/network/" class="nav-link">网络</a></li><li class="dropdown-item"><!----> <a href="/cryptography/" class="nav-link">密码学</a></li><li class="dropdown-item"><!----> <a href="/software_use/" class="nav-link">软件使用</a></li><li class="dropdown-item"><!----> <a href="/teacher/" class="nav-link">教师资格证</a></li><li class="dropdown-item"><!----> <a href="/database/" class="nav-link">数据库</a></li><li class="dropdown-item"><!----> <a href="/mq/" class="nav-link">消息队列</a></li><li class="dropdown-item"><!----> <a href="/microservice/" class="nav-link">微服务</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="生活学习" class="dropdown-title"><a href="/" class="link-title router-link-active">生活学习</a> <span class="title" style="display:none;">生活学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>视频资源网站</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://c.wxbxkx.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  百度网盘视频资源
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.agemys.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  AGE动漫网
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="http://www.kisssub.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  爱恋动漫
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>烹饪学习</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://cook.aiurs.co/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  程序员做饭指南
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>软件下载</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.ghxi.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  果核剥壳
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div><div class="nav-item"><a href="/collection/" class="nav-link">收藏</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div> <a href="https://github.com/chenkehao1998/my_blog_resource" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/avatar.jfif"> <div class="blogger-info"><h3>Kehao Chen</h3> <span>人生如逆旅，我亦是行人</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程学习" class="dropdown-title"><a href="/" class="link-title router-link-active">编程学习</a> <span class="title" style="display:none;">编程学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>教程网站</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.runoob.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  菜鸟教程
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://javaguide.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java Guide
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://pdai.tech/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java全栈知识体系
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://learngitbranching.js.org/?locale=zh_CN" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GIT在线学习
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="http://c.biancheng.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  C语言中文网
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.liaoxuefeng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  廖雪峰
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.ruanyifeng.com/blog/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阮一峰的网络日志
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://tech.meituan.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  美团技术团队
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>工具类网站</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://d.serctl.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github release加速下载
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.bejson.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  BE JSON
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://tool.lu/markdown/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Markdown在线编辑器
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记" class="dropdown-title"><a href="/" class="link-title router-link-active">笔记</a> <span class="title" style="display:none;">笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ds/" class="nav-link">数据结构与算法</a></li><li class="dropdown-item"><!----> <a href="/python/" class="nav-link">python</a></li><li class="dropdown-item"><!----> <a href="/safe/" class="nav-link">安全</a></li><li class="dropdown-item"><!----> <a href="/java/" class="nav-link">java</a></li><li class="dropdown-item"><!----> <a href="/system/" class="nav-link">操作系统</a></li><li class="dropdown-item"><!----> <a href="/network/" class="nav-link">网络</a></li><li class="dropdown-item"><!----> <a href="/cryptography/" class="nav-link">密码学</a></li><li class="dropdown-item"><!----> <a href="/software_use/" class="nav-link">软件使用</a></li><li class="dropdown-item"><!----> <a href="/teacher/" class="nav-link">教师资格证</a></li><li class="dropdown-item"><!----> <a href="/database/" class="nav-link">数据库</a></li><li class="dropdown-item"><!----> <a href="/mq/" class="nav-link">消息队列</a></li><li class="dropdown-item"><!----> <a href="/microservice/" class="nav-link">微服务</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="生活学习" class="dropdown-title"><a href="/" class="link-title router-link-active">生活学习</a> <span class="title" style="display:none;">生活学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>视频资源网站</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://c.wxbxkx.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  百度网盘视频资源
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.agemys.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  AGE动漫网
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="http://www.kisssub.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  爱恋动漫
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>烹饪学习</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://cook.aiurs.co/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  程序员做饭指南
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>软件下载</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.ghxi.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  果核剥壳
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div><div class="nav-item"><a href="/collection/" class="nav-link">收藏</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div> <a href="https://github.com/chenkehao1998/my_blog_resource" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>集合</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>多线程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>spring</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>jvm</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/e78c12/" class="sidebar-link">垃圾收集器_</a></li><li><a href="/pages/ecc12f/" class="sidebar-link">内存屏障</a></li><li><a href="/pages/f0e774/" class="sidebar-link">浅析java中的TLAB</a></li><li><a href="/pages/7844f9/" class="sidebar-link">为啥加锁可以解决可见性问题呢？</a></li><li><a href="/pages/53d695/" class="sidebar-link">主内存和工作内存的关系</a></li><li><a href="/pages/f4ef8d/" class="sidebar-link">jackson中@JsonProperty、@JsonIgnore等常用注解总结</a></li><li><a href="/pages/8f8483/" class="sidebar-link">Java OOM问题如何排查</a></li><li><a href="/pages/bff2a8/" class="sidebar-link">java对象头</a></li><li><a href="/pages/1b51c8/" class="sidebar-link">Java内存模型(JMM)</a></li><li><a href="/pages/4be2cf/" class="sidebar-link">java强引用、弱引用、软引用、虚引用</a></li><li><a href="/pages/a6fc4c/" class="sidebar-link">JMM：Java内存模型</a></li><li><a href="/pages/016c1e/" aria-current="page" class="active sidebar-link">JVM内存结构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/016c1e/#_2-1-局部变量表" class="sidebar-link">2.1 局部变量表</a></li><li class="sidebar-sub-header level2"><a href="/pages/016c1e/#_2-2-操作数栈" class="sidebar-link">2.2 操作数栈</a></li></ul></li><li><a href="/pages/126d5d/" class="sidebar-link">java 创建对象过程 实例化和初始化</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span> 解决问题</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=java" title="分类" data-v-06225672>java</a></li><li data-v-06225672><a href="/categories/?category=jvm" title="分类" data-v-06225672>jvm</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/chenkehao1998" target="_blank" title="作者" class="beLink" data-v-06225672>kehao</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-04-17</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">JVM内存结构<!----></h1> <!----> <div class="theme-vdoing-content content__default"><p>Java 虚拟机在执行 Java 程序的过程中会把它管理的内存划分为若干个不同的数据区域。每个区域都有各自的作用。</p> <p>分析 JVM 内存结构，主要就是分析 JVM 运行时数据存储区域。JVM 的运行时数据区主要包括：<strong>堆、栈、方法区、程序计数器</strong>等。而 JVM 的优化问题主要在<strong>线程共享的数据区</strong>中：<strong>堆、方法区</strong>。</p> <p><img src="/assets/img/watermark_type_ZmFuZ3poZW5naGVpd_43f8e9b1b3214c209.bf6fe98f.png" alt=""></p> <h1 id="_1-程序计数器"><a href="#_1-程序计数器" class="header-anchor">#</a> 1. 程序计数器</h1> <p><strong>程序计数器（Program Counter Register）<strong>是一块较小的内存空间，可以看作是</strong>当前线程</strong>所执行字节码的<strong>行号指示器</strong>，指向下一个将要执行的指令代码，由执行引擎来读取下一条指令。更确切的说，<strong>一个线程的执行，是通过字节码解释器改变当前线程的计数器的值，来获取下一条需要执行的字节码指令，从而确保线程的正确执行</strong>。</p> <p>为了确保线程切换后（<strong>上下文切换</strong>）能恢复到正确的执行位置，<strong>每个线程都有一个独立的程序计数器</strong>，各个线程的计数器互不影响，独立存储。也就是说程序计数器是<strong>线程私有的内存</strong>。</p> <p>如果线程执行 Java 方法，这个计数器记录的是正在执行的虚拟机字节码指令的地址；如果执行的是 Native 方法，计数器值为Undefined。</p> <p><strong>程序计数器不会发生内存溢出（OutOfMemoryError即OOM）问题。</strong></p> <h1 id="_2-栈"><a href="#_2-栈" class="header-anchor">#</a> 2. 栈</h1> <p>JVM 中的栈包括 <strong>Java 虚拟机栈</strong>和本地方法栈，两者的<strong>区别</strong>就是，Java 虚拟机栈为 JVM 执行 Java 方法服务，本地方法栈则为 JVM 使用到的 Native 方法服务。两者作用是极其相似的，本文主要介绍 Java 虚拟机栈，以下简称栈。</p> <blockquote><p><strong>Native 方法是什么？</strong></p></blockquote> <p>JDK 中有很多方法是使用 Native 修饰的。Native 方法<strong>不是以 Java 语言实现</strong>的，而是以本地语言实现的（比如 C 或 C++）。个人理解Native 方法是与操作系统直接交互的。比如通知垃圾收集器进行垃圾回收的代码 System.gc()，就是使用 native 修饰的。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">System</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">gc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Runtime</span><span class="token punctuation">.</span><span class="token function">getRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">gc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Runtime</span> <span class="token punctuation">{</span>
    <span class="token comment">//使用native修饰</span>
     <span class="token keyword">public</span> <span class="token keyword">native</span> <span class="token keyword">void</span> <span class="token function">gc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p><strong>什么是栈？</strong></p></blockquote> <p><strong>定义：限定仅在表头进行插入和删除操作的线性表</strong>。即<strong>压栈（入栈）和弹栈（出栈）<strong>都是对</strong>栈顶元素</strong>进行操作的。所以栈是<strong>后进先出</strong>的。</p> <p>栈是<strong>线程私有</strong>的，他的生命周期与线程相同。每个线程都会分配一个栈的空间，即<strong>每个线程拥有独立的栈空间</strong>。</p> <p><img src="/assets/img/watermark_type_ZmFuZ3poZW5naGVpd_24c9346d9dc745908.37711f9e.png" alt=""></p> <blockquote><p><strong>栈中存储的是什么？</strong></p></blockquote> <p><strong>栈帧</strong>是栈的元素。<strong>每个方法在执行时都会创建一个栈帧</strong>。栈帧中存储了<strong>局部变量表、操作数栈、动态连接和方法出口</strong>等信息。每个方法从调用到运行结束的过程，就对应着一个栈帧在栈中压栈到出栈的过程。</p> <p><img src="/assets/img/20190409182042686_b5ce7e1b75424e7880a35e0a1d049371.9fffb258.png" alt=""></p> <h2 id="_2-1-局部变量表"><a href="#_2-1-局部变量表" class="header-anchor">#</a> 2.1 局部变量表</h2> <p>栈帧中，由一个<strong>局部变量表存储数据</strong>。局部变量表中存储了<strong>基本数据类型</strong>（boolean、byte、char、short、int、float、long、double）的<strong>局部变量（包括参数）、和对象的引用（String、数组、对象等），但是不存储对象的内容</strong>。局部变量表所需的内存空间在<strong>编译期间完成分配</strong>，在方法运行期间不会改变局部变量表的大小。</p> <p>局部变量的容量以**变量槽（Variable Slot）**为最小单位，每个变量槽最大存储32位的数据类型。对于64位的数据类型（long、double），JVM 会为其分配两个连续的变量槽来存储。以下简称 Slot 。</p> <p>JVM 通过索引定位的方式使用局部变量表，索引的范围从0开始至局部变量表中最大的 Slot 数量。<strong>普通方法与 static 方法</strong>在第 0 个槽位的存储有所不同。非 static 方法的第 0 个槽位存储方法所属对象实例的引用。</p> <p><img src="/assets/img/watermark_type_ZmFuZ3poZW5naGVpd_62ea324825d943088.3989b9aa.png" alt=""></p> <blockquote><p><strong>Slot 复用？</strong></p></blockquote> <p>为了尽可能的节省栈帧空间，局部变量表中的 <strong>Slot 是可以复用</strong>的。方法中定义的局部变量，其作用域不一定会覆盖整个方法。当方法运行时，如果已经<strong>超出了某个变量的作用域</strong>，即变量失效了，那这个变量对应的 Slot 就可以交给其他变量使用，也就是所谓的 <strong>Slot 复用</strong>。通过一个例子来理解变量“失效”。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> flag<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">66</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">55</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>当虚拟机运行 test 方法，就会创建一个栈帧，并压入到当前线程的栈中。当运行到 int a = 66时，在当前栈帧的局部变量中创建一个 Slot 存储变量 a，当运行到 int b = 55时，此时已经超出变量 a 的作用域了（变量 a 的作用域在{}所包含的代码块中），此时 a 就失效了，变量a 占用的 Slot 就可以交给b来使用，这就是 Slot 复用。</p> <p>凡事有利弊。Slot 复用虽然节省了栈帧空间，但是会伴随一些额外的<strong>副作用</strong>。比如，Slot 的复用会直接影响到系统的垃圾收集行为。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestDemo</span> <span class="token punctuation">{</span>
 
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> placeholder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">64</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        
        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">gc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>上段代码很简单，先向内存中填充了 64M 的数据，然后通知虚拟机进行垃圾回收。为了更清晰的查看垃圾回收的过程，我们再虚拟机的运行参数中加上“<strong>-verbose:gc</strong>”,这个参数的作用就是<strong>打印 GC 信息</strong>。</p> <p><img src="/assets/img/watermark_type_ZmFuZ3poZW5naGVpd_44df04bb06814e2cb.b2ac4a99.png" alt=""></p> <p>打印的GC信息如下：</p> <p><img src="/assets/img/20190410185953669_8cf9fca04f9542eb8454de058bd882bf.7a8c9b19.png" alt=""></p> <p>可以看到虚拟机没有回收这 64M 内存。为什么没有被回收？其实很好理解，当执行 System.gc() 方法时，变量 placeholder 还在作用域范围之内，虚拟机是不会回收的，它还是“有效”的。</p> <p>我们对上面的代码稍作修改，使其作用域“失效”。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestDemo</span> <span class="token punctuation">{</span>
 
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> placeholder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">64</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">gc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>当运行到 System.gc() 方法时，变量 placeholder 的作用域已经失效了。它已经“无用”了，虚拟机会回收它所占用的内存了吧？</p> <p>运行结果：</p> <p><img src="/assets/img/20190410190827875_f2a1b45b16124313b0557cdc49f0a7cc.c0c47f04.png" alt=""></p> <p>发现虚拟机还是没有回收 placeholder 变量占用的 64M 内存。为什么所想非所见呢？在解释之前，我们再对代码稍作修改。在System.gc()方法执行之前，加入一个局部变量。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestDemo</span> <span class="token punctuation">{</span>
 
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> placeholder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">64</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">gc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>在 System.gc() 方法之前，加入 int a = 0，再执行方法，查看垃圾回收情况。</p> <p><img src="/assets/img/20190410191854837_209bca271bd942d89cc1addfa6751313.806ee64a.png" alt=""></p> <p>发现 placeholder 变量占用的64M内存空间被回收了，如果不理解局部变量表的Slot复用，很难理解这种现象的。</p> <p>而 <strong>placeholder 变量能否被回收的关键</strong>就在于：局部变量表中的 Slot 是否还存有关于 placeholder 对象的引用。</p> <p>第一次修改中，限定了 placeholder 的作用域，但<strong>之后并没有任何对局部变量表的读写操作</strong>，placeholder 变量在局部变量表中占用的Slot没有被其它变量所复用，所以作为 GC Roots 一部分的局部变量表仍然保持着对它的关联。所以 placeholder 变量没有被回收。</p> <p>第二次修改后，运行到 int a = 0 时，已经超过了 placeholder 变量的作用域，此时 placeholder 在局部变量表中占用的Slot可以交给其他变量使用。<strong>而变量a正好复用了 placeholder 占用的 Slot</strong>，至此局部变量表中的 Slot 已经没有 placeholder 的引用了，虚拟机就回收了placeholder 占用的 64M 内存空间。</p> <hr> <h2 id="_2-2-操作数栈"><a href="#_2-2-操作数栈" class="header-anchor">#</a> 2.2 操作数栈</h2> <p><strong>操作数栈</strong>是一个<strong>后进先出</strong>栈。操作数栈的<strong>元素可以是任意的Java数据类型</strong>。方法刚开始执行时，操作数栈是<strong>空的</strong>，在方法执行过程中，通过字节码指令对操作数栈进行<strong>压栈和出栈</strong>的操作。<strong>通常进行<strong><strong>算数运算</strong></strong>的时候是通过操作数栈来进行的</strong>**，<strong><strong>又或者是在调用其他方法的时候通过操作数栈进行</strong></strong>参数传递****。操作数栈可以理解为栈帧中用于<strong><strong>计算</strong></strong>的临时数据存储区**。</p> <p>通过一段代码来了解操作数栈。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OperandStack</span><span class="token punctuation">{</span>
 
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">int</span> c <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
        <span class="token keyword">return</span> c<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">98</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>使用 javap **反编译 **OperandStack 后，根据虚拟机指令集，得出操作数栈的运行流程如下：</p> <p><img src="data:image/png;base64,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" alt=""></p> <p>add 方法刚开始执行时，操作数栈是空的。当执行 iload_0 时，把局部变量 0 压栈，即 100 入操作数栈。然后执行 iload_1，把局部变量1压栈，即 98 入操作数栈。接着执行 iadd，弹出两个变量（100 和 98 出操作数栈），对 100 和 98 进行求和，然后将结果 198 压栈。然后执行 istore_2，弹出结果（出栈）。</p> <p>下面通过一张图，对比执行100+98操作，<strong>局部变量表和操作数栈的变化情况</strong>。</p> <p><img src="/assets/img/watermark_type_ZmFuZ3poZW5naGVpd_5e15bd3473b44920a.10129206.jpg" alt=""></p> <blockquote><p><strong>栈中可能出现哪些异常？</strong></p></blockquote> <p><strong>StackOverflowError：栈溢出错误</strong></p> <p>如果一个线程在计算时所需要用到栈大小 &gt; 配置允许最大的栈大小，那么Java虚拟机将抛出 StackOverflowError</p> <p><strong>OutOfMemoryError：内存不足</strong></p> <p>栈进行动态扩展时如果无法申请到足够内存，会抛出 OutOfMemoryError 异常。</p> <blockquote><p><strong>如何设置栈参数？</strong></p></blockquote> <p>使用 <strong>-Xss <strong>设置栈大小，通常几百K就够用了。由于栈是</strong>线程私有</strong>的，<strong>线程数越多，占用栈空间越大</strong>。</p> <p><strong>栈决定了函数调用的深度</strong>。这也是慎用递归调用的原因。递归调用时，每次调用方法都会创建栈帧并压栈。当调用一定次数之后，所需栈的大小已经超过了虚拟机运行配置的最大栈参数，就会抛出 StackOverflowError 异常。</p> <h1 id="_3-java堆"><a href="#_3-java堆" class="header-anchor">#</a> 3. Java堆</h1> <p>堆是Java虚拟机所管理的内存中最大的一块存储区域。堆内存被所有<strong>线程共享</strong>。主要存放使用<strong>new</strong>关键字创建的对象。所有<strong>对象实例以及数组</strong>都要在堆上分配。垃圾收集器就是根据GC算法，收集堆上<strong>对象所占用的内存空间（收集的是对象占用的空间而不是对象本身）</strong>。</p> <p>Java堆分为<strong>年轻代</strong>（Young Generation）和<strong>老年代</strong>（Old Generation）；<strong>年轻代又分为伊甸园（Eden）和幸存区（Survivor区）；幸存区又分为From Survivor空间和 To Survivor空间。</strong></p> <p>年轻代存储“新生对象”，我们新创建的对象存储在年轻代中。当年轻内存占满后，会触发<strong>Minor GC</strong>，清理年轻代内存空间。</p> <p>老年代存储<strong>长期存活的对象和大对象</strong>。年轻代中存储的对象，经过多次GC后仍然存活的对象会移动到老年代中进行存储。老年代空间占满后，会触发<strong>Full GC</strong>。</p> <p><strong>注：Full GC</strong>是清理整个堆空间，包括年轻代和老年代。如果Full GC之后，堆中仍然无法存储对象，就会抛出<strong>OutOfMemoryError</strong>异常。</p> <p><img src="/assets/img/watermark_type_ZmFuZ3poZW5naGVpd_bb62ebd0575c40a1b.a085124f.png" alt=""></p> <blockquote><p>Java堆设置常用参数</p></blockquote> <table><thead><tr><th>参数</th> <th>描述</th></tr></thead> <tbody><tr><td>-Xms</td> <td>堆内存初始大小</td></tr> <tr><td>-Xmx（MaxHeapSize）</td> <td>堆内存最大允许大小，一般不要大于物理内存的80%</td></tr> <tr><td>-XX:NewSize（-Xns）</td> <td>年轻代内存初始大小</td></tr> <tr><td>-XX:MaxNewSize（-Xmn）</td> <td>年轻代内存最大允许大小，也可以缩写</td></tr> <tr><td>-XX:NewRatio</td> <td>新生代和老年代的比值<br><br>值为4 表示 新生代:老年代=1:4，即年轻代占堆的1/5</td></tr> <tr><td>-XX:SurvivorRatio=8</td> <td>年轻代中Eden区与Survivor区的容量比例值，默认为8<br><br>表示两个Survivor :eden=2:8，即一个Survivor占年轻代的1/10</td></tr> <tr><td>-XX:+HeapDumpOnOutOfMemoryError</td> <td>内存溢出时，导出堆信息到文件</td></tr> <tr><td>-XX:+HeapDumpPath</td> <td>堆Dump路径<br><br>-Xmx20m -Xms5m<br><br>-XX:+HeapDumpOnOutOfMemoryError<br><br>-XX:HeapDumpPath=d:/a.dump</td></tr> <tr><td>-XX:OnOutOfMemoryError</td> <td>当发生OOM内存溢出时，执行一个脚本<br><br>-XX:OnOutOfMemoryError=D:/tools/jdk1.7_40/bin/printstack.bat %p<br><br>%p表示线程的id pid</td></tr> <tr><td>-XX:MaxTenuringThreshold=7</td> <td>表示如果在幸存区移动多少次没有被垃圾回收，进入老年代</td></tr></tbody></table> <h1 id="_4-方法区-method-area"><a href="#_4-方法区-method-area" class="header-anchor">#</a> 4. 方法区（Method Area）</h1> <p>方法区同 Java 堆一样是被所有<strong>线程共享</strong>的区间，用于存储<strong>已被虚拟机加载的类信息、常量、静态变量、即时编译器编译后的代码</strong>。更具体的说，静态变量+常量+类信息（版本、方法、字段等）+运行时常量池存在方法区中。<strong>常量池是方法区的一部分</strong>。</p> <p><img src="/assets/img/watermark_type_ZmFuZ3poZW5naGVpd_72726c982b8f459db.396ff092.png" alt=""></p> <p><strong>注</strong>：JDK1.8 使用元空间 **MetaSpace **替代方法区，元空间并不在 JVM中，而是使用本地内存。元空间两个参数：</p> <ol><li>MetaSpaceSize：初始化元空间大小，控制发生GC阈值</li> <li>MaxMetaspaceSize ： 限制元空间大小上限，防止异常占用过多物理内存</li></ol> <p>常量池中存储编译器生成的各种<strong>字面量和符号引用</strong>。字面量就是Java中常量的意思。比如文本字符串，final修饰的常量等。方法引用则包括类和接口的全限定名，方法名和描述符，字段名和描述符等。</p> <p><img src="/assets/img/watermark_type_ZmFuZ3poZW5naGVpd_a925c58d493d4ec69.505b1d93.png" alt=""></p> <blockquote><p><strong>常量池有什么用 ？</strong></p></blockquote> <p>**优点：**常量池避免了频繁的创建和销毁对象而影响系统性能，其实现了对象的共享。</p> <p>举个栗子： Integer 常量池（缓存池），和字符串常量池</p> <blockquote><p><strong>Integer常量池：</strong></p></blockquote> <p>我们知道 <strong>== 基本数据类型比较的是数值，而引用数据类型比较的是内存地址</strong>。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">TestIntegerCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        
        <span class="token class-name">Integer</span> i1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span><span class="token number">66</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">integer</span><span class="token punctuation">(</span><span class="token number">66</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i3 <span class="token operator">=</span> <span class="token number">66</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i4 <span class="token operator">=</span> <span class="token number">66</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i5 <span class="token operator">=</span> <span class="token number">150</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i6 <span class="token operator">=</span> <span class="token number">150</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i1 <span class="token operator">==</span> i2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//false</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i3 <span class="token operator">==</span> i4<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i5 <span class="token operator">==</span> i6<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//false</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>i1 和 i2 使用 new 关键字，每 new 一次都会在堆上创建一个对象，所以 i1 == i2 为 false。</p> <p>i3 == i4 为什么是 true 呢？Integer i3 = 66 实际上有一步<strong>装箱</strong>的操作，即将 int 型的 66 装箱成 Integer，通过 Integer 的 valueOf 方法。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Integer</span> <span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>low <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;=</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>high<span class="token punctuation">)</span><span class="token punctuation">{</span>
    	<span class="token keyword">return</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>low<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Integer 的 valueOf 方法很简单，它判断变量是否在 **IntegerCache **的最小值（-128）和最大值（127）之间，如果在，则返回常量池中的内容，否则 new 一个 Integer 对象。</p> <p>而 **IntegerCache **是 <strong>Integer的静态内部类</strong>，作用就是将 [-128,127] 之间的数“缓存”在 IntegerCache 类的 cache 数组中，valueOf 方法就是调用常量池的 cache 数组，不过是将 i3、i4 <strong>变量引用指向常量池中，没有真正的创建对象</strong>。而new Integer(i)则是直接在堆中创建对象。</p> <p>IntegerCache 类中，包含一个构造方法，三个静态变量：low最小值、high最大值、和Integer数组，还有一个静态代码块。静态代码块的作用就是在 IntegerCache 类加载的时候，对high最大值以及 Integer 数组初始化。也就是说当 IntegerCache 类加载的时候，最大最小值，和 Integer 数组就已经初始化好了。这个 Integer 数组其实就是包含了 -128到127之间的所有值。</p> <blockquote><p><strong>IntegerCache 源码</strong></p></blockquote> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">IntegerCache</span> <span class="token punctuation">{</span>
        <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> low <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">128</span><span class="token punctuation">;</span><span class="token comment">//最小值</span>
        <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> high<span class="token punctuation">;</span><span class="token comment">//最大值</span>
        <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Integer</span> cache<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//缓存数组</span>
 
        <span class="token comment">//私有化构造方法，不让别人创建它。单例模式的思想</span>
        <span class="token keyword">private</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
 
        <span class="token comment">//类加载的时候，执行静态代码块。作用是将-128到127之间的数缓冲在cache[]数组中</span>
        <span class="token keyword">static</span> <span class="token punctuation">{</span>
            <span class="token comment">// high value may be configured by property</span>
            <span class="token keyword">int</span> h <span class="token operator">=</span> <span class="token number">127</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> integerCacheHighPropValue <span class="token operator">=</span>
                sun<span class="token punctuation">.</span>misc<span class="token punctuation">.</span>VM<span class="token punctuation">.</span><span class="token function">getSavedProperty</span><span class="token punctuation">(</span><span class="token string">&quot;java.lang.Integer.IntegerCache.high&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>integerCacheHighPropValue <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>integerCacheHighPropValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    i <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">// Maximum array size is Integer.MAX_VALUE</span>
                    h <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span>MAX_VALUE <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token operator">-</span>low<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span> <span class="token class-name">NumberFormatException</span> nfe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// If the property cannot be parsed into an int, ignore it.</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            high <span class="token operator">=</span> h<span class="token punctuation">;</span>
 
            cache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">(</span>high <span class="token operator">-</span> low<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//初始化cache数组，根据最大最小值确定</span>
            <span class="token keyword">int</span> j <span class="token operator">=</span> low<span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> cache<span class="token punctuation">.</span>length<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span><span class="token comment">//遍历将数据放入cache数组中</span>
                cache<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
            <span class="token comment">// range [-128, 127] must be interned (JLS7 5.1.7)</span>
            <span class="token keyword">assert</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>high <span class="token operator">&gt;=</span> <span class="token number">127</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
 
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p>而 i5 == i6 为 false，就是因为 **150 不在 Integer 常量池的最大最小值之间【-128,127】，从而 new 了一个对象，**所以为 false。</p> <p>再看一段<strong>拆箱</strong>的代码。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token class-name">Integer</span> i1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">Integer</span> i2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">Integer</span> i3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>i3 <span class="token operator">==</span> i1<span class="token operator">+</span>i2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>由于 i1 和 i2 是 Integer 对象，是不能使用+运算符的。首先 i1 和 i2 进行<strong>自动拆箱</strong>操作，拆箱成int后再进行数值加法运算。i3 也是拆箱后再与之比较数值是否相等的。所以 i3 == i1+i2 其实是比较的 int 型数值是否相等，所以为true。</p> <hr> <blockquote><p><strong>String常量池：</strong></p></blockquote> <p><strong>String 是由 final 修饰的类，是不可以被继承的</strong>。通常有两种方式来创建对象。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">&quot;abcd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token string">&quot;abcd&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>第一种使用 new 创建的对象，存放在堆中。每次调用都会创建一个新的对象。</p> <p>第二种先在栈上创建一个 String 类的对象引用变量 str，然后通过符号引用去字符串常量池中找有没有 “abcd”，如果没有，则将“abcd”存放到字符串常量池中，并将栈上的 str 变量引用指向常量池中的“abcd”。如果常量池中已经有“abcd”了，则不会再常量池中创建“abcd”，而是直接将 str 引用指向常量池中的“abcd”。</p> <p>对于 String 类，equals 方法用于比较字符串内容是否相同； == 号用于比较内存地址是否相同，即是否指向同一个对象。通过代码验证上面理论。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">String</span> str1 <span class="token operator">=</span> <span class="token string">&quot;abcd&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> str2 <span class="token operator">=</span> <span class="token string">&quot;abcd&quot;</span><span class="token punctuation">;</span>
	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>str1 <span class="token operator">==</span> str2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
    


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>首先在栈上存放变量引用 str1，然后通过符号引用去常量池中找是否有 abcd，没有，则将 abcd 存储在常量池中，然后将 str1 指向常量池的 abcd。当创建 str2 对象，去常量池中发现已经有 abcd 了，就将 str2 引用直接指向 abcd 。所以str1 == str2，指向<strong>同一个内存地址</strong>。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">String</span> str1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">&quot;abcd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> str2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">&quot;abcd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>str1 <span class="token operator">==</span> str2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>str1 和 str2 使用 new 创建对象，分别在堆上创建了不同的对象。两个引用指向堆中两个不同的对象，所以为 false。</p> <blockquote><p><strong>关于字符串 + 号连接问题：</strong></p></blockquote> <p>对于字符串常量的 + 号连接，在程序编译期，JVM就会将其优化为 + 号连接后的值。所以在<strong>编译期其字符串常量的值就确定了</strong>。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">String</span> a <span class="token operator">=</span> <span class="token string">&quot;a1&quot;</span><span class="token punctuation">;</span>   
<span class="token class-name">String</span> b <span class="token operator">=</span> <span class="token string">&quot;a&quot;</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>   
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">(</span>a <span class="token operator">==</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//result = true  </span>
 
<span class="token class-name">String</span> a <span class="token operator">=</span> <span class="token string">&quot;atrue&quot;</span><span class="token punctuation">;</span>   
<span class="token class-name">String</span> b <span class="token operator">=</span> <span class="token string">&quot;a&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">;</span>   
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">(</span>a <span class="token operator">==</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//result = true </span>
 
<span class="token class-name">String</span> a <span class="token operator">=</span> <span class="token string">&quot;a3.4&quot;</span><span class="token punctuation">;</span>   
<span class="token class-name">String</span> b <span class="token operator">=</span> <span class="token string">&quot;a&quot;</span> <span class="token operator">+</span> <span class="token number">3.4</span><span class="token punctuation">;</span>   
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">(</span>a <span class="token operator">==</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//result = true </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><blockquote><p><strong>关于字符串引用 + 号连接问题：</strong></p></blockquote> <p>对于字符串<strong>引用</strong>的 + 号连接问题，由于字符串引用在<strong>编译期是无法确定</strong>下来的，在程序的<strong>运行期动态分配并创建新的地址存储对象</strong>。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token class-name">String</span> str1 <span class="token operator">=</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">;</span>
	   <span class="token class-name">String</span> str2 <span class="token operator">=</span> <span class="token string">&quot;ab&quot;</span><span class="token punctuation">;</span>
	   <span class="token class-name">String</span> str3 <span class="token operator">=</span> str1 <span class="token operator">+</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">;</span>
	   <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>str2 <span class="token operator">==</span> str3<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//false</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>对于上边代码，str3 等于 str1 引用 + 字符串常量“b”，在编译期无法确定，在运行期动态的分配并将连接后的新地址赋给 str3，所以 str2 和 str3 引用的内存地址不同，所以 str2 == str3 结果为 false</p> <p>通过 jad 反编译工具，分析上述代码到底做了什么。编译指令如下：</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAc8AAACVCAIAAACxeOZZAAAgAElEQVR4Ae1dPatlV3bsFv0HHBlhGEuJowFnxso6GEfK/DsmMUzU4MCBsoHJlRkcODJYMJkEiicwWJ70och26PR10ri6a7pe9dofZ+/zdT/eOsHR2rVq1Vq7zrl7Llea7pcPDw+Pj4/vvnvz1Tc/vMjrBh348ccfNfXr168RAwmBCMxySY6nFEtBSAbnO1A+2fNnyI47OvBqR62UupQDnXOTI+Xn9lKPZktfPVZ/fFsEs/ayDjydtnqieMYecz4ievyXHXqX7toRAm1ZG1R2l17XIKKtnTAMLQ2NZi2d5aNd6EsFHyOYEPhUED+QiZcl4ivo92W2FG/hks3g1h149fPPP799+/YXL17g8Ye3pHwhrm23W17Qg/a7ZaRL2RueO8cowZH3oaySGstBGNSZ5Vfd814+m8cqDLOFJWjVKpV70Olb3Zd6KXC1jO/Dgafvtv39+NvTZ56W1XupgK3Dct08q/eLQgywrumOVZpBbghRF+1RAVNiBlyFnYAlUpCgpBAgq2VVygkjfIhQMPT1Lq7Z4leHWQG2+voM4GipQIOtaJol1+/AZ9c/4uKE/nIvkp8JAZ7o4paxRBDA0g198sFEXBLuGKFFrQ3KmRYh8XSg78DQd1t96qqvY8j60mPOIQRLV3PcU46LL5DBIt63oMxKX8rgqFcn25FCimpBB6AQdZGODyAwg1kH4PCsk6EkLAcHmKoCmbKzow4Ok7SLOzB02vLx623wof19YiyyUioUQgUtFQhX4G+eaGrhWZS0cKqN36XjJQAxAC5mkVKsgHwsFYjsfIK4k6mgpUO1qbtm8AEWFcIAHGxKYbHF9RP0UM4c1Z33+MwZstfRDsRfEqY+YOG1CB9LLRUMbmaWPyhbpXELuFezJbh9NiiEdpxh317ogitoAmHrascqqJIgdUPL6r4687837qNRpM0qrKhCx85ImboPB4a+2x691fByn/bmed/TmspMfIYVM/B5gJw5UudA4VRnDhNsucgy7NofFuPnZshFnsKdNb2K0xae+rvb+eTfmfvhI32CD2VHNJXhPEdosmKUVKvu7Fm4D2Fr2L4QeSUkg3Rg0IHPfvW7P/zPv/9mkB1o/BAK1OdTyGCwurCvf5Ds9qatw+tSA+s0QcALe/wYvuZ+sVw9ntdCBEtqIsbF2O+zfK89M27N35qhtS/HW7WJ34EDr/75L//lX//8t3/74tvyvQeC9wCbVIoBQW7eX5QpMspdRy0cd3HHRS7nIa2KIzV4VfUJ4s6xfelzMibNcbTGcnEAypI2wl8UBIHDkMnYkfEuI0woqxEClSBgSghprfssv9W3pV/lqymrwqjVkpZ+C1eLIC4chSHVkkr85hx4+f3337///5L99G3+qTQ39/A4sE4BLPlBBeJBWKqKnOquVVLNJniOA+WTPadvdjnIgWv53fag7T0H2XBohoNSSwX0BFUBeQ5e3dYew5O9reFz2tKBz17897/95uuvy0QiN+qAf0QRa6lA+yqRkZQ4dxzgf4dmd4eS2aqSXyI+Rj8r5iBNfA/K2hJxfsZTDrx68Rd//9vff/3ip2/LMhjd+UCCv0goNRNJB27FgepB458IJwh3kDtVyjdOGu7KlojzV8TlJIvzgOAjrWiaJR0Hmr8kjJiOF2WE1mmfqXTgmh3QUcgh8baHaQMB2fChCCVaqrBEWr2Ai7w4RjlJKRvUNFIQz+VeDrw/bfFfgP3iy79yRTyGQetBGyejBchqFFowFUCSyxYdHemrlgFHVezZalMSbvTu/mALN7fBzstw9BMpX7bFjlMl5bMokfKRTbVYHJgE70vDVXhEO4k/2+DVH373qzfv/um/vvyPEywIj9CXihVwHizLwUqOvzeBj1QQ6ZBD7aWWHHj1nKU/l9rIM+nLd2z189rFJX/JN74/u8yTIqUDr/7mH77//du3L356Om3DZ7WsCcj2V807BjW+wf4mhe4bl5f9hFSHlxsKSAvLau0tgtV9Xeq5YBj3MCw9pZgcvbfajgIxGbjm4DZZ4oWU8nLF3ldTqbVoYapcnuBA83fbE3pni74D6z4Y/mGj/jqd/mzPISvfSku1fU+B31mqxGUJokpZBuIIL5GyCuQqKBEPSqaQspcXZrzagYnTdvvD2OspQgfDUE3BCgv6OwpZX3rMvkKw5GAl7qkqXyAD6bRwtpi6S0rDCEG7MhaoYdhOzEWdwHcdiTBQSrgQiuCuVOgLplJllcr7ARRcp0/WAE4LrcPSmR6LxgE8hVj7CnhnWdUJfDVVC0cCOZe7ODB62vrz83j1EBtF8GZAAd23vCKspU7YiI/HWGSlVCiEIloqEK7AxxZNLTyLkhZOtfG7GvkYElcWAQjAEeASgQFSAkd0At9rS2UKCudSd6+VLMjAcbFKuKoGA1egiBciq6UalTRxFDhZ4HjAqXDHtVgFDtr5HSUlEnTEZxCyudzRgaHTNjwGPL+NEwTBFWpSUNAX8Xeuz0Q2aIb9aqlgUZCEWf6g7F40jacAyooRBFtafb2EHCFQaFVtxNVitU5Q0FIzCwktHA8WqdZLqqATFLuadyFhXEeC/QAtvGOfnNkVDgydtit0OyXbn6grXPMrwtlkRfmBUeruAzwy7DEYcs6u1XpFO75pfl8hEkoGXwM2DbWdZeB7F9ruiHTKqoCIqQAExFU1cTKoOlA5bTvPpiqx+Hi8aorshTca+0t5zt7Lx3dO384DuuAAaq2gM2dIhZLSWPJB88Kw9NRU7G8OChdlA3+ql5P7OhiDBAVem3Hfgc++/PLLL774ok+Cv/6wPe4Xhmx4QtJx/cAJCucsfR501Jyz3VcX9htNyYKM7fQFO1n12qjDFlKrduxnqyXHgdX9hheD3QHqAqIYQRiv1CyRUKKlyzJWajFgF9wDs9O9HD7U5nKFA5XvtlCB1+FJEGEDfxKBtjgB+FWO9F0cTPEZMCsypUJJ0JeCcCAsUcrFpansFBnl5FNHIo6DUMUFMnAdlldxNvK767uI45pnRdNZHfEZoCMCDexZgq2RxCSNIiRLMyxVQrKa9gOplTQKTqmVImci2kuYXPjUMBRByQ05MLXBQ8kvHx4eHh8f3333pvzzbRefxyLh0NFT/GgHnufzLXddInIeKcXVQKdSKTKCUDMwuQygujvucVWqWuXMUkElGcw6UP9uSxW9KC3RRUKrMPHrdwAfMwyZH7bFJ9X5FNBDKgTaFmMhtVjO1qEpJhmp1cCLXRbNSYI70Ptu67yM04F0IB1IB7Y48NmW4qxNB9KBdCAdGHQgT9tBo5KWDpzhwP/98pfeJiw9lfHNOdD73fbmNpMDpwN35sCf/fGPOHBxr+7LU61zuVVbFUzwUAfytD3U3hRPByYcaJ2efpL66elnscdq6YUCM7iUA3naXsr57JsOLDjgByup/dMzHLh+di90yvQpDuTvtqfYnE3SgSUHdDj2j9QgE05kHrjgSC3wc3lBB/K77QXNz9bpwJ8c4AkbztmwHDQrfMMdrEraCQ7kaXuCydkiHVhwQF9R/TupwLLYD2KnEeeBiypPlSKJnOxAnrYnG57t0oGmA37UNkkfEjpGdezqnEVeOg72BTN7ggN52p5gcrZIB5Yd0BEpKs9KLRnonB3BW+RQm8tzHMjT9hyfs0s60HOAB6uOV52SCHgK695RUTk4iiXVKczUOQ7kaXuOz9klHeg5oFO1R1rK6WDl0bxEz/zZDuR/AXa249kvHag6oLMSWR2X/Irq92otCdVUgtfjQH63vZ5nkZOkA0+/ANALfefl+Vs9VaspZ/o5nhZf0IE8bS9ofrZOB/7kgA5HnoxajhjEEj9Sef6O1CbnTAfyl4Qz3c5e0w7wT8WeLhsoOE55oHmk+IlZPSv9MPXiFu6cjK/EgfxueyUP4s7H0N8C0Dnjyr9oAKaM/10D7mC1S1VfVWVJn6/CvQKdmwqorOXUF969pkqdHR3YdNrqI7TjQFukrm2e2b3c8fx+aFZPsfKwk3teK1BBWUh93mVpoHHJ+whf7c4MdM6yaVh2JhlndkQytbsD8bQNLyVfxFZXZMEPHCkQD8uW1C54dZ5dlM8Rqc4vAzlDcPucwQa7VOdv1fLN4b3FGcFlyKwUC4O9rY6Bxp2S3NKpckjud+lzWrV74WGnvsddWgT9i2yWM5zf+pPfbTEEJtC1zlyUo5B3BVqu03zOVfITAa7wso47g8LVteNdSqaaYnhkeQeoJQlcluWrEchSWYGkgLCdAqa4xF1MBeCzxANkCSpQVoVKMaiKO/kaYu1CwY5T0TEq434Thuy1/U9O271En6fOOe/N6heUb3nn0Rw0fzkwGvkwJSEMSf7seJDFBakP/3wf8JIaBXFXID4Qxh+LdvsnZNmuqogsrmrqNLAcoESmhunsFzoQ7xOmeg2S0RTXIHlH2tNpiz2HCcISBFyhNzglGDhnLq9tntm9P4f59V7pzREya9cKvnoxCEsIYiqB4/rjVRAHeVw5mXfjQPzd9uiNhfdMr7XjBIX421nlY2bh5fzjOhQhH7EXSlYgES8BwqwPI76DYroI49m79FHoLRwPKSyVZYmWDFo6TkZcklvDq9CVW+QVeHX+AI7IomRqQpBnSzhGtVAD+wwl6IjHVC4RbbyTEmcxkAiY1TmpwJTIDJzfaqQS6TuiKkl5VqBo1UAlzi9BRzymZolUewVw4rT14YLK4BIjuogmLnHQyERKWQRsJETLzgBTOh/avoY+LhZCWbECBxGT6VnO40grDlIsHLy7puuUeCmo3SE1Mr/0QYY+rlZV2csRFLaWFPQsYjVi3yqnnEQ0lQdZKuuuLMfjXSLK7hhAPMymXaiLExR7oceoEifEYek09RoJQqGWCiiCJQPtiMFii1IHhbiEh0BL9QV5sQs5qBXTdRR7X49RJU6IJdgKnn5JaDEWcY6ySCsJ3HaJB0Q0BS0C8dY8KlcQdHw5wnF+NZYIHk+VUAVRNcWvijioMQj6u+K0qVia5bQlAmU1RVYXcMUIpgbYTmZH9eWEAoWPNNLuREZ5CSqLoJ8lUzOA7LWtuMUPvURr6WzEj9bfOF5ZroE3+lwqB2Tiu22oXLHErnw/2iSkHF9U7ugs1m4heF8fvqPJfXlhh7wiVfUttPNRq/wVfcdLWh2J4+7jBdmQ5b46fJV7U8X9wn5WyrsEYV8dTQ7PjYvGpe7CEVT5TtgYUz+IlOMFwviyqj9evppZ9U0OI4vYxat8J1Tjp9NW0uKVPZQKQVkbCFr60K7vuMidwPmuw5LxeTotylTZqOQ4MstX7fj87oPKETjuYxB3xKv2itFFLdTRxZn1u2e3x9q+xig1kQLIuwceSwdg9eJOq6kW2BkplIwzWTjLD+1Gli1DHN8yhuuMzLMLZ3bgWb6GbP6SUCoCwaXKFcFg+SJtkbBitpESfrTQnVerBNmQKpFAGF9CqvVGqouCliw30soulqNQHASteTr6XtIapqrcIrMXSnC1+gacM2gSBLxA+xi+DiWtJfitVMAx3jhZteWmINKRCnySO2pKTQXqoqBfXqUBbBlS5fdbMIvCdbVl1ZTPi7M9fbcFldKsaVmwqBh0uFSV70ctvK/4YjIQmVLKiq8WIRCz1On0BZkdWcWlQM3gU0lNoCOoVblw6ogfJlcXBKjl0skdHfFRxRIiuKuKMWVJI4d8R8gR7ikHSevcg76YGklqYTYxy4CawFVbcgIyLh4KR5aaR2S1U6BUP3BbULtY3uErhY6I+32RRS/enewiyHqKfIAB55JZ8qX8gfuJCAiljvgq96DkU3bqrr4MoMkWLZFZvnRePjw8PD4+vvvuzVff/CB0XbA45TrZ1VW7zxMEw3L1nK3Co/VbfRfxwcGc5rH0qyCyLbxVGPhYihkCfopKvn+6OtmQCuKrly7r8WrBLKw64N56XCUfAX7y3faIBvekqf9N46b8I3pP2+zvBa8pCLMv67hXI8p6EJQN4mEZthP0sQyEcilOX7ksHEdOaDE+zB0zL+vznt9t7/gh5dbSgXQgHdjoQPPfkm3UzfJ0IB1IB9IBdyBPW3cj43QgHUgHjnIgT9ujnE3ddCAdSAfcgTxt3Y2M04F0IB04yoE8bY9yNnXTgR0daP2lZAEPyx0HSKntDuR/Abbdw1RIB45ywE9PxIt/4RgIHZqnXNmnX2zh5IynHMjTdsquJKcDBzpQnoD9s691erqOK/hZ7LG25IUCM9jLgTxt93IyddKBHRzww3FWrqztn57hwPWze7Z18kccyN9tR1xKTjpwdQ7ocOwfqWHucCLzwAVHaoGfyx0dyO+2O5qZUunAVgf6R6fOStICOSwHRwnfcAerkrbCgTxtV5iWJenAUQ7wPMW5qYNVnfwwVdaZAlWioFqLLHEUKlBJBrs7kKft7pamYDqwvwN+qkq9CirrgQ5inqpI+fEqHQe9PONdHMjTdhcbUyQd2NMBftnUEVmV1hGpLM9KLRm0RKp4FQyCuVztQJ62q63LwnTgJAdaB6uOV52SCEjWvTOiysFRLKlOYabWOZCn7TrfsiodONaBcG6GZsoGfGqpg5VH81Rtklc4kP8F2ArTsuQ8B/THP+/e8jjlvUbtH6k6K9FOxyW/ovq9OgwJ1VSCxzmQ322P8zaVnxzA0ca/+KBzxlX/ZgSAqn2SW4qqXar6UipL+nwV7hXoxJQgkRIXAUE4N3VAq9bJjKsp1/FzvCxPZLUDm07bFR+D1YOOFF7bPCMzO+eO5/dDs3qKlYednPFagQrKQurzLksDjUveR/hqd1rAMxHtdIB6ax2OPBm1dE4rZokfqerVKkl8FwfiaRteSr6IrU7Igh84UiAeli2pXfDqPLsonyNSnV8Gcobg9jmDDXapzt+q5ZvDe4szgsuQWSkWBntbHQONOyW5pVPlkFx24XnHLn/961+D4KchYp6nAolwWT0rxQyT/yf+TrlP/7rccpgpJOi3NjiluQsZg13PMNzRJ6dtmC/4OGgBdug6YTkokjQ5EAx0b8UZCfg0z3//NDBb8+4g490H437hjAK5xI5MeV/iyoqPIIxNxJkgaImgrC1LnMPDsTxnxdHBCoQx7+iFAxTzBSaWPKA/JN9nW+MhteXyjUNHXbZobqzFDBsVDirPf0u2m7HnPGO+3CuGRmG/6qD5y4HDB7IkhDnJnx0Psrgg9eGf7wNeUqMg7grEB8L4Y9Fu/4Qs21UVcYDyDK1mAZYEnzPUkuwEypZIKGx1J96ZHwSI9wl98V2ymAHXLlL7ijydtvAojBiWIOAK7cEpwcA5c3lt88zu/TnMr/dKb46QWbtW8NWLQVhCEFMJHNcfr4I4yOPKybwbBz75JeGEXYX3TK+14wSF+NtZ5WNs4eUWxnUoQj5iL5SsQCJeAoRZH0Z8B8V0Ecazd+mj0Fs4HlJYKssSLRm0dJyMuCS3hlehK7fIK/Dq/AEckUXJ1IQgz5ZwjGqhBvYZqiBEhI/sq8NxnWpfDexNWeX8VotS3xFVScqzAkWrBioZ4bfIwtlCUi28OskiOHHaaoJF0RYBo7uIdlLioJGJlLIIqCxEy1ZH4FM677t++Ah5C8UKIOsxSgKCZUCc73GgfagbvbV0SrxU5MzER+YHk7LBn9CrbBQQ8B3xpY8kjvTZt8ohKCZqRXNQmgzYmnelHJSIsjsGEEcvb8HY53FCK8ZIXjI1oWtSRzP4YNKvZjsdq/oQER4CLakZltVGzvF4ihwKsawOILwqPgI+/ZIwwq5yaF811Qf9iXaYoikI5IBjWfVFNAVBx5cjHOdXY4lU56mWAETVFL+lI1xjEIF4QMQcD6SAIExbIpBVU2R1AVeMYLz7Lkx2VF9OKFD4SC/tTmSUl6CyCPpZMjUDyF57cqwxTu672C54uDinCH0/RQsDtPBA6ywnvtt2VAZTGNf36dM7vqjW0Vms3ULwvj58R5P78sIOeUWq6lto56NW+Sv6jpe0OhLH3ccLsiHLfXX4KvemivuF/ayUdwnCvjqaHJ4b79BWp2SOK4R2W5yp6nuvk+Oqn639tvDVMz+dtpR2ZzGZLzs9ytoW2QVd3/FWrePOdx1yxudxzcW4bNQvmeVLbXx+90HlCBz3MYg74lV7xeiiFuro4sz63bPbY21fY5SaSAHk3QOPpQOwenGn1VQL7IwUSsaZoXB82dqg41vGcJ3xqQ5idjbiczqtha+bsPlLgrekNBBc69pIYaR8scsiYaTLCg6sR2tdLQUQQqpEAmF8CSl/A7xQXRR41mNuxBGPF8tBFgdBax7X9DiUtIYJNCq0yMyiBJf36sQcW8Mj4IWSj+HrTrmnwPdlJ8Z442TpdDbVSal8MJCUgn5hlQawtcEqv9+CWRRWa9HIcY/7soEZlqpt4SLMBk/fbVHp07csG2ngOpRVlW9ALap8MRmITCllg74aKRCz1On0BZkdWcWlQM3gU0lNoCOoVblw6oivmT1AFZa8I3ByR0d8lUhHVUCqagLFhIh0FFNQZOL9e6tEjaQWZuvIUhME1XbITI2LL0qVBM2jlNopUKofuC2oVblwlDNWqiUIAlKB5jqUUjn5XIImHIGqiEu5JIvpKfFVzsCVnc+4dfcW0tHwDISLzABZpVTCMdSuhYswFbx8eHh4fHx8992br775YaqyJPv0ZfZ8ZPd5gmBY7r7Bo/VXDzw4mNM8Vt8qiGwLbxUGPpZihoCfrpKvTx34nWxIBfHVS5f1eLVgFl6nA598t73OEa9nKnwm8WHQPP4RFXj3AR2YPRTGvRpR1oOgbBAPy/BEgj63EzhhKU5fOVRNLU9oMTVPko9wYM/vtkfMl5rpQDqQDtyHA81/S3Yf28tdpAPpQDpwJQ7kaXslDyLHSAfSgTt34Ol3W/1ypB0f8SsVuxynrOEZ7Ngo+LOjcph5donBrmeYFcOr5Jp3ke+tHtOK4Dj3VgxzwZKn0xbvevjchuUFpxxszY+rxkYwWDhCC/6oy0jtQZx9N3jQkB1Z9/DW99LZ5mLqub23i4aAwPeBzozwb4Jz9i8JsO8gB0vZEpl6JP3PP8T7hKle68iYAde62qxqOVB9rMdZXT7BEmmNWsWr84sJ8T5BzB2DFe5tNGHH4XeUOvu03XH0lLppB/CZ90+Uxze9rxw+HWg58PRLQotBXP97qE+FIx4HPpesKmnIEgShk6UI7uouZDCQeBBxXCmBDEaaqqQU8QklVfKdVo1VIpEqjWCLLJw0SbXwTotDUz4PhySCWCkNj0kEInY+l8qqpERchNkRMjh9KcjikhSX43eJBxHHlRLIYKSpSkoRH1JSJd9p1VglEgGtCjpelbp1MJ62cgEbkzsAy5gIUsoioB1CtGSgEi4FvpeotaiCXjsYuw5KtFRAHSwZaE7tmnjrXuqgEJfwEGhJwbCsdnGOx1PkUIhldQDhVfETwHJO+ekpxQp8OyjBEilcip1QxqIxIAF34UIIujgQbyQFgV47GIdaLRVQB0sGmlPd+41KHRTiEh4CLdUX5H4LZMlBrZiu04pB9hLV3nQQT9uqfQKr+1dWQXCkhTtthOP8I+JrmKG6L38jQVicU4Tq81IL0YQwaOGBtuNScy62XiSUU6mkDNS3rBpEpDnIP4J2DTNM7UsDb/d/qu/FyfG0bQ1EX2DTiEGBJnNb4i3cdVaLULw6tuuDtqVFVb+1rxNwzlNu0OfUfkvaCRN6Cw6geZDyOZ3Zitfxw8Zb4rO4y/qmZnXAr+7L9cHZ0qKqv2LO2RL2DRuZFbk5/tBpC2tmn6jzV5TTx9WF5WPweTzr+JZ2ruP6F4k7G/E5ndbCj5sfHX2A0MjnCanqcorf6VsVnwV31G/ty/Et7Vxndpur+VsGXt30Ggrn/psE2DQy9CBtUQqvAqR0LfIHCRAkU0G/sEoD2HpTq/x+C81TraUPUqhylPUgMMNSzA5eTQGcwtVoXVDt1ZEa5/eZ/WxngHxvO+Z4quNwJ+UKtxU//ak0b//uHzl69RDh5vWxV6DdelVwSqkqLpA0XyJWLRqFpVp74OVVHKA0RSZTuApJIN4nezbwsZROCEJfZTWAB8wCoT4CIaQJV8pbCyQZd/FbOsRFU+EsrsIyUOvQRbjmFEJma1ny2bSqD5A6rSxr1culBJbzIOWCYUmRcA9qygoHIk0HHQ9V5PfJng18LJktAzYiH7FoGqAMwBHfS0ItlyCAHFKl5s0hT6ft9j/fdvfNw+7whHy5e7sUTAd2cSDfW9roPni8i8m3KDL0u+2lNqb/feMAedRe6kFk3ykH8r2VXThkGeeHFz5c9WmL+fIh8WXN+205kO9tfnjLN3bu35KV9YmkA+lAOpAOjDiQp+2IS8lJB9KBdGCrA3nabnUw69OBdCAdGHEgT9sRl5KTDqQD6cBWB/K03epg1qcD6UA6MOJAnrYjLiUnHUgH0oGtDuRpu9XBrE8H0oF0YMSBPG1HXEpOOpAOpANbHcjTdquDWZ8OpAPpwIgDedqOuJScdCAdSAe2OpCn7VYHsz4dSAfSgREH8rQdcSk56UA6kA5sdSBP260OZn06kA6kAyMO5Gk74lJy0oF0IB3Y6kCetlsdzPp0IB1IB0YcyNN2xKXkXMwB/XHUu09wnPLuo6bgfThw7X+a+H24nLvQX5TSOeOqfwI3QNWO21jtUtWXZlnS56swg3Rg0IFNp+2Kj8HgWOto1zbP7C7ueH4/NKunWHnYyT2vFaigLKQ+77I00LjkfYSvdhmkA6sdiKdteCn5IrbUkQU/cKRAPCxbUrvg1Xl2UT5HpDq/DOQMwe1zBhvsUp2/Vcs3h/cWZwSXIbNSLAz2tjoGGndKckunyiG51SXx+3bgk99t+b7iheC1bueoRSHvCrRcp/mcq+QnAlzhYz/uDApX1453KZlqiuGR5R2gliRwWZavRiBLZQWSAsJ2CpjiEncxFYDPEg+QJahAWRUqxaAq7uSM79iBT07bO97nCVs754OEz/O6RjoXWlask22pCS8HRiMfpnlamRsAAAP4SURBVCSolgH5s+NBFhcUPvzzfcBLahTEXYH4QBh/LNrtn5Blu90UU+h2HHg6bcs3LLxwIOAKW7u2t+fa5gl2LS6fw/x6r/Q6CVn0ZztBvRiEJfQxlcDxduNVEAd5XDmZd+NA/N326I2F90yvteMEhfjbWeVjZuHl/OM6FCEfsRdKViARLwHCrA8jvoNiugjj2bv0UegtHA8pLJVliZYMWjpORlySW8Or0JVb5BV4df4AjsiiZGpCkGdLOMbqwpFdJOdqHZg4badexOqGw6uJJWkljl5sh5SyCFp84tX7lM6Htq/ft7QPnmIFaOSxWjDQGM5pxUFKtSOBa7pOiZdqPurI/NIHGfq4WlVlL0dQ2FpS0LOI1Yh9q5xyEtFUHmSprLuyHI93iSi7YwDxzmw7Nkqp63Hg6ZeE1TPxvVlRPvg2i6Yg9Ao4lvy0tGiBH2hcjnCqhQ5KpDqPMz1uze+cqVhjsGqXD7k0y2lLBH3VFFldwBUj4Hin3dlRfTmhQOEj82h3IqO8BJVF0M86M+O7cWDiu+32PfMVlI6/0Hj5hC8GHZ3F2i0E7+vDdzS5Ly/skFekqr6Fdj5qlb+i73hJqyNx3H28IBuy3FeHr3Jvqrhf2M9KeZcg7GsXzRS5fgeeTtvyVR5/J8ra1s79nXZ9x1u1jjvfdcgZn8c1F+OyUb9kli+18fndB5UjcNzHIO6IV+0Vo4taqKOLM+t3z26PtX2NUWoiBZB3DzyWDsDqxZ1WUy2wM1KrJPH7cKD5S0L5TgDBtWXbg+WLtEXCliE7tfxooTuvFhPZkCqRQBhfQqp1BKiLgpZs/4xYLIesOAha87S6h5LWMIFGtRaZWZTgavUNOMfW8Ah4gfYxfB1KWkvwW6mAY7xA/t/GFQpzeQcOPH23xWbwHuhlDe/E1FZdh7Iql77jVb6YDMI8yrqOunggZqnT6QsyO7KKS4HUD0upsZCDsZwp8cWkjvg+tmIq8E5NpTo64qtEOqoC4q2FCxTCjsKpSUEHNVgraJWokdTCbC1B4NREoNoOmalx8UWpkqB5lFI7BUpl8KwcePnw8PD4+PjuuzdfffPDxp1f28u0+zxBMCw3uleWH61fdhxEBgdzmsfqUgWRbeGtwsDHUswQ8EQu+X5Sd7IhFcTXLfHVtlr4+eefV/EEb9eBT77b3u42zpkcn0l83tTLP6IC7z6gA7PnzrhXI8p6EJQN4mEZnkjQ53YCJyzF6SuHqlymA8GBPb/bBulcpgPpQDqQDsiB5r8lEyODdCAdSAfSge0O5Gm73cNUSAfSgXRg2YE8bZc9SkY6kA6kA9sdyNN2u4epkA6kA+nAsgN52i57lIx0IB1IB7Y78P/+6o1r4IfAwQAAAABJRU5ErkJggg==" alt=""></p> <p>经过 jad 反编译工具反编译代码后，代码如下</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestDemo</span>
<span class="token punctuation">{</span>
 
    <span class="token keyword">public</span> <span class="token class-name">TestDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span> args<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> s1 <span class="token operator">=</span> <span class="token string">&quot;ab&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> s2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>s1 <span class="token operator">=</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>发现 <strong>new 了一个 StringBuilder 对象，然后使用 append 方法优化了 + 操作符</strong>。new 在堆上创建对象，而 String s1=“ab”则是在常量池中创建对象，两个应用所指向的内存地址是不同的，所以 s1 == s2 结果为 false。</p> <p><strong>注</strong>：我们已经知道了字符串引用的 + 号连接问题，其实是在运行期间创建一个 StringBuilder 对象，使用其 append 方法将字符串连接起来。这个也是我们开发中需要注意的一个问题，就是<strong>尽量不要在 for 循环中使用 + 号来操作字符串</strong>。看下面一段代码：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            s <span class="token operator">=</span> s <span class="token operator">+</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>在 for 循环中使用 + 连接字符串，<strong>每循环一次，就会新建 StringBuilder 对象，append 后就“抛弃”了它</strong>。如果我们在循环外创建StringBuilder 对象，然后在循环中使用 append 方法追加字符串，就可以<strong>节省 n-1 次创建和销毁对象的时间</strong>。所以在循环中连接字符串，一般使用 StringBuilder 或者 StringBuffer，而不是使用 + 号操作。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">StringBuilder</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            s<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p><strong>使用final修饰的字符串</strong></p></blockquote> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token class-name">String</span> str1 <span class="token operator">=</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> str2 <span class="token operator">=</span> <span class="token string">&quot;ab&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> str3 <span class="token operator">=</span> str1 <span class="token operator">+</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>str2 <span class="token operator">==</span> str3<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>final 修饰的变量是一个常量，编译期就能确定其值。所以 str1 + &quot;b&quot;就等同于 &quot;a&quot; + &quot;b&quot;，所以结果是 true。</p> <blockquote><p><strong>String对象的intern方法。</strong></p></blockquote> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token string">&quot;ab&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> s1 <span class="token operator">=</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> s2 <span class="token operator">=</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> s3 <span class="token operator">=</span> s1 <span class="token operator">+</span> s2<span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s3 <span class="token operator">==</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//false</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s3<span class="token punctuation">.</span><span class="token function">intern</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>通过前面学习我们知道，s1+s2 实际上在堆上 new 了一个 StringBuilder 对象，而 s 在常量池中创建对象 “ab”，所以 s3 == s 为 false。但是 s3 调用 <strong>intern 方法，返回的是s3的内容（ab）在常量池中的地址值</strong>。所以 s3.intern() == s 结果为 true。</p></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/chenkehao1998/my_blog_resource/edit/master/docs/04.java/05.jvm/12.JVM内存结构.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/04/18, 00:47:23</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/a6fc4c/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">JMM：Java内存模型</div></a> <a href="/pages/126d5d/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">java 创建对象过程 实例化和初始化</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/a6fc4c/" class="prev">JMM：Java内存模型</a></span> <span class="next"><a href="/pages/126d5d/">java 创建对象过程 实例化和初始化</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/644e67/"><div>
            java 中为 final 变量赋值的几种方式
            <!----></div></a> <span class="date">08-10</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/ee7b99/"><div>
            Java8 新特性之 Optional 正确理解和用法
            <!----></div></a> <span class="date">08-10</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/1016ea/"><div>
            Spring boot 项目 maven 多模块打包 子模块报错 Unable to find ma
            <!----></div></a> <span class="date">08-10</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:chenkehaockh@foxmail.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/chenkehao1998" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/user/home?id=39714521" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> <!----></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.0e772854.js" defer></script><script src="/assets/js/2.815a8da9.js" defer></script><script src="/assets/js/5.2a38d04c.js" defer></script>
  </body>
</html>
